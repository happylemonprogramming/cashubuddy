/*! For license information please see bundle.js.LICENSE.txt */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.CashuBuddy=t():e.CashuBuddy=t()}(this,(()=>(()=>{var e={102:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha384=t.sha512_256=t.sha512_224=t.sha512=t.SHA384=t.SHA512_256=t.SHA512_224=t.SHA512=void 0;const r=n(202),o=n(318),i=n(175),[s,a]=(()=>o.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map((e=>BigInt(e)))))(),c=new Uint32Array(80),u=new Uint32Array(80);class f extends r.HashMD{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){const{Ah:e,Al:t,Bh:n,Bl:r,Ch:o,Cl:i,Dh:s,Dl:a,Eh:c,El:u,Fh:f,Fl:l,Gh:h,Gl:d,Hh:p,Hl:y}=this;return[e,t,n,r,o,i,s,a,c,u,f,l,h,d,p,y]}set(e,t,n,r,o,i,s,a,c,u,f,l,h,d,p,y){this.Ah=0|e,this.Al=0|t,this.Bh=0|n,this.Bl=0|r,this.Ch=0|o,this.Cl=0|i,this.Dh=0|s,this.Dl=0|a,this.Eh=0|c,this.El=0|u,this.Fh=0|f,this.Fl=0|l,this.Gh=0|h,this.Gl=0|d,this.Hh=0|p,this.Hl=0|y}process(e,t){for(let n=0;n<16;n++,t+=4)c[n]=e.getUint32(t),u[n]=e.getUint32(t+=4);for(let e=16;e<80;e++){const t=0|c[e-15],n=0|u[e-15],r=o.default.rotrSH(t,n,1)^o.default.rotrSH(t,n,8)^o.default.shrSH(t,n,7),i=o.default.rotrSL(t,n,1)^o.default.rotrSL(t,n,8)^o.default.shrSL(t,n,7),s=0|c[e-2],a=0|u[e-2],f=o.default.rotrSH(s,a,19)^o.default.rotrBH(s,a,61)^o.default.shrSH(s,a,6),l=o.default.rotrSL(s,a,19)^o.default.rotrBL(s,a,61)^o.default.shrSL(s,a,6),h=o.default.add4L(i,l,u[e-7],u[e-16]),d=o.default.add4H(h,r,f,c[e-7],c[e-16]);c[e]=0|d,u[e]=0|h}let{Ah:n,Al:r,Bh:i,Bl:f,Ch:l,Cl:h,Dh:d,Dl:p,Eh:y,El:g,Fh:m,Fl:w,Gh:b,Gl:v,Hh:E,Hl:B}=this;for(let e=0;e<80;e++){const t=o.default.rotrSH(y,g,14)^o.default.rotrSH(y,g,18)^o.default.rotrBH(y,g,41),x=o.default.rotrSL(y,g,14)^o.default.rotrSL(y,g,18)^o.default.rotrBL(y,g,41),k=y&m^~y&b,A=g&w^~g&v,S=o.default.add5L(B,x,A,a[e],u[e]),I=o.default.add5H(S,E,t,k,s[e],c[e]),_=0|S,T=o.default.rotrSH(n,r,28)^o.default.rotrBH(n,r,34)^o.default.rotrBH(n,r,39),U=o.default.rotrSL(n,r,28)^o.default.rotrBL(n,r,34)^o.default.rotrBL(n,r,39),P=n&i^n&l^i&l,O=r&f^r&h^f&h;E=0|b,B=0|v,b=0|m,v=0|w,m=0|y,w=0|g,({h:y,l:g}=o.default.add(0|d,0|p,0|I,0|_)),d=0|l,p=0|h,l=0|i,h=0|f,i=0|n,f=0|r;const L=o.default.add3L(_,U,O);n=o.default.add3H(L,I,T,P),r=0|L}({h:n,l:r}=o.default.add(0|this.Ah,0|this.Al,0|n,0|r)),({h:i,l:f}=o.default.add(0|this.Bh,0|this.Bl,0|i,0|f)),({h:l,l:h}=o.default.add(0|this.Ch,0|this.Cl,0|l,0|h)),({h:d,l:p}=o.default.add(0|this.Dh,0|this.Dl,0|d,0|p)),({h:y,l:g}=o.default.add(0|this.Eh,0|this.El,0|y,0|g)),({h:m,l:w}=o.default.add(0|this.Fh,0|this.Fl,0|m,0|w)),({h:b,l:v}=o.default.add(0|this.Gh,0|this.Gl,0|b,0|v)),({h:E,l:B}=o.default.add(0|this.Hh,0|this.Hl,0|E,0|B)),this.set(n,r,i,f,l,h,d,p,y,g,m,w,b,v,E,B)}roundClean(){c.fill(0),u.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}t.SHA512=f;class l extends f{constructor(){super(),this.Ah=-1942145080,this.Al=424955298,this.Bh=1944164710,this.Bl=-1982016298,this.Ch=502970286,this.Cl=855612546,this.Dh=1738396948,this.Dl=1479516111,this.Eh=258812777,this.El=2077511080,this.Fh=2011393907,this.Fl=79989058,this.Gh=1067287976,this.Gl=1780299464,this.Hh=286451373,this.Hl=-1848208735,this.outputLen=28}}t.SHA512_224=l;class h extends f{constructor(){super(),this.Ah=573645204,this.Al=-64227540,this.Bh=-1621794909,this.Bl=-934517566,this.Ch=596883563,this.Cl=1867755857,this.Dh=-1774684391,this.Dl=1497426621,this.Eh=-1775747358,this.El=-1467023389,this.Fh=-1101128155,this.Fl=1401305490,this.Gh=721525244,this.Gl=746961066,this.Hh=246885852,this.Hl=-2117784414,this.outputLen=32}}t.SHA512_256=h;class d extends f{constructor(){super(),this.Ah=-876896931,this.Al=-1056596264,this.Bh=1654270250,this.Bl=914150663,this.Ch=-1856437926,this.Cl=812702999,this.Dh=355462360,this.Dl=-150054599,this.Eh=1731405415,this.El=-4191439,this.Fh=-1900787065,this.Fl=1750603025,this.Gh=-619958771,this.Gl=1694076839,this.Hh=1203062813,this.Hl=-1090891868,this.outputLen=48}}t.SHA384=d,t.sha512=(0,i.wrapConstructor)((()=>new f)),t.sha512_224=(0,i.wrapConstructor)((()=>new l)),t.sha512_256=(0,i.wrapConstructor)((()=>new h)),t.sha384=(0,i.wrapConstructor)((()=>new d))},145:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.crypto=void 0,t.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},168:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HDKey=t.HARDENED_OFFSET=void 0;const r=n(615),o=n(238),i=n(623),s=n(102),a=n(557),c=n(175),u=n(510),f=n(967),l=n(203),h=u.secp256k1.ProjectivePoint,d=(0,l.createBase58check)(i.sha256);function p(e){(0,a.abytes)(e);const t=0===e.length?"0":(0,c.bytesToHex)(e);return BigInt("0x"+t)}const y=(0,c.utf8ToBytes)("Bitcoin seed"),g={private:76066276,public:76067358};t.HARDENED_OFFSET=2147483648;const m=e=>{if(!Number.isSafeInteger(e)||e<0||e>2**32-1)throw new Error("invalid number, should be from 0 to 2**32-1, got "+e);const t=new Uint8Array(4);return(0,c.createView)(t).setUint32(0,e,!1),t};class w{get fingerprint(){if(!this.pubHash)throw new Error("No publicKey set!");return e=this.pubHash,(0,c.createView)(e).getUint32(0,!1);var e}get identifier(){return this.pubHash}get pubKeyHash(){return this.pubHash}get privateKey(){return this.privKeyBytes||null}get publicKey(){return this.pubKey||null}get privateExtendedKey(){const e=this.privateKey;if(!e)throw new Error("No private key");return d.encode(this.serialize(this.versions.private,(0,c.concatBytes)(new Uint8Array([0]),e)))}get publicExtendedKey(){if(!this.pubKey)throw new Error("No public key");return d.encode(this.serialize(this.versions.public,this.pubKey))}static fromMasterSeed(e,t=g){if((0,a.abytes)(e),8*e.length<128||8*e.length>512)throw new Error("HDKey: seed length must be between 128 and 512 bits; 256 bits is advised, got "+e.length);const n=(0,r.hmac)(s.sha512,y,e);return new w({versions:t,chainCode:n.slice(32),privateKey:n.slice(0,32)})}static fromExtendedKey(e,t=g){const n=d.decode(e),r=(0,c.createView)(n),o=r.getUint32(0,!1),i={versions:t,depth:n[4],parentFingerprint:r.getUint32(5,!1),index:r.getUint32(9,!1),chainCode:n.slice(13,45)},s=n.slice(45),a=0===s[0];if(o!==t[a?"private":"public"])throw new Error("Version mismatch");return new w(a?{...i,privateKey:s.slice(1)}:{...i,publicKey:s})}static fromJSON(e){return w.fromExtendedKey(e.xpriv)}constructor(e){if(this.depth=0,this.index=0,this.chainCode=null,this.parentFingerprint=0,!e||"object"!=typeof e)throw new Error("HDKey.constructor must not be called directly");if(this.versions=e.versions||g,this.depth=e.depth||0,this.chainCode=e.chainCode||null,this.index=e.index||0,this.parentFingerprint=e.parentFingerprint||0,!this.depth&&(this.parentFingerprint||this.index))throw new Error("HDKey: zero depth with non-zero index/parent fingerprint");if(e.publicKey&&e.privateKey)throw new Error("HDKey: publicKey and privateKey at same time.");if(e.privateKey){if(!u.secp256k1.utils.isValidPrivateKey(e.privateKey))throw new Error("Invalid private key");this.privKey="bigint"==typeof e.privateKey?e.privateKey:p(e.privateKey),this.privKeyBytes=function(e){if("bigint"!=typeof e)throw new Error("bigint expected");return(0,c.hexToBytes)(e.toString(16).padStart(64,"0"))}(this.privKey),this.pubKey=u.secp256k1.getPublicKey(e.privateKey,!0)}else{if(!e.publicKey)throw new Error("HDKey: no public or private key provided");this.pubKey=h.fromHex(e.publicKey).toRawBytes(!0)}var t;this.pubHash=(t=this.pubKey,(0,o.ripemd160)((0,i.sha256)(t)))}derive(e){if(!/^[mM]'?/.test(e))throw new Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return this;const n=e.replace(/^[mM]'?\//,"").split("/");let r=this;for(const e of n){const n=/^(\d+)('?)$/.exec(e),o=n&&n[1];if(!n||3!==n.length||"string"!=typeof o)throw new Error("invalid child index: "+e);let i=+o;if(!Number.isSafeInteger(i)||i>=t.HARDENED_OFFSET)throw new Error("Invalid index");"'"===n[2]&&(i+=t.HARDENED_OFFSET),r=r.deriveChild(i)}return r}deriveChild(e){if(!this.pubKey||!this.chainCode)throw new Error("No publicKey or chainCode set");let n=m(e);if(e>=t.HARDENED_OFFSET){const e=this.privateKey;if(!e)throw new Error("Could not derive hardened child key");n=(0,c.concatBytes)(new Uint8Array([0]),e,n)}else n=(0,c.concatBytes)(this.pubKey,n);const o=(0,r.hmac)(s.sha512,this.chainCode,n),i=p(o.slice(0,32)),a=o.slice(32);if(!u.secp256k1.utils.isValidPrivateKey(i))throw new Error("Tweak bigger than curve order");const l={versions:this.versions,chainCode:a,depth:this.depth+1,parentFingerprint:this.fingerprint,index:e};try{if(this.privateKey){const e=(0,f.mod)(this.privKey+i,u.secp256k1.CURVE.n);if(!u.secp256k1.utils.isValidPrivateKey(e))throw new Error("The tweak was out of range or the resulted private key is invalid");l.privateKey=e}else{const e=h.fromHex(this.pubKey).add(h.fromPrivateKey(i));if(e.equals(h.ZERO))throw new Error("The tweak was equal to negative P, which made the result key invalid");l.publicKey=e.toRawBytes(!0)}return new w(l)}catch(t){return this.deriveChild(e+1)}}sign(e){if(!this.privateKey)throw new Error("No privateKey set!");return(0,a.abytes)(e,32),u.secp256k1.sign(e,this.privKey).toCompactRawBytes()}verify(e,t){if((0,a.abytes)(e,32),(0,a.abytes)(t,64),!this.publicKey)throw new Error("No publicKey set!");let n;try{n=u.secp256k1.Signature.fromCompact(t)}catch(e){return!1}return u.secp256k1.verify(n,e,this.publicKey)}wipePrivateData(){return this.privKey=void 0,this.privKeyBytes&&(this.privKeyBytes.fill(0),this.privKeyBytes=void 0),this}toJSON(){return{xpriv:this.privateExtendedKey,xpub:this.publicExtendedKey}}serialize(e,t){if(!this.chainCode)throw new Error("No chainCode set");return(0,a.abytes)(t,33),(0,c.concatBytes)(m(e),new Uint8Array([this.depth]),m(this.parentFingerprint),m(this.index),this.chainCode,t)}}t.HDKey=w},175:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Hash=t.nextTick=t.byteSwapIfBE=t.isLE=void 0,t.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},t.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},t.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},t.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},t.rotr=function(e,t){return e<<32-t|e>>>t},t.rotl=function(e,t){return e<<t|e>>>32-t>>>0},t.byteSwap=i,t.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=i(e[t])},t.bytesToHex=function(e){(0,o.abytes)(e);let t="";for(let n=0;n<e.length;n++)t+=s[e[n]];return t},t.hexToBytes=function(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,o=0;t<n;t++,o+=2){const n=c(e.charCodeAt(o)),i=c(e.charCodeAt(o+1));if(void 0===n||void 0===i){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[t]=16*n+i}return r},t.asyncLoop=async function(e,n,r){let o=Date.now();for(let i=0;i<e;i++){r(i);const e=Date.now()-o;e>=0&&e<n||(await(0,t.nextTick)(),o+=e)}},t.utf8ToBytes=u,t.toBytes=f,t.concatBytes=function(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];(0,o.abytes)(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r),r+=o.length}return n},t.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!=={}.toString.call(t))throw new Error("Options should be object or undefined");return Object.assign(e,t)},t.wrapConstructor=function(e){const t=t=>e().update(f(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t},t.wrapConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(f(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.wrapXOFConstructorWithOpts=function(e){const t=(t,n)=>e(n).update(f(t)).digest(),n=e({});return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=t=>e(t),t},t.randomBytes=function(e=32){if(r.crypto&&"function"==typeof r.crypto.getRandomValues)return r.crypto.getRandomValues(new Uint8Array(e));if(r.crypto&&"function"==typeof r.crypto.randomBytes)return r.crypto.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")};const r=n(145),o=n(557);function i(e){return e<<24&4278190080|e<<8&16711680|e>>>8&65280|e>>>24&255}t.isLE=68===new Uint8Array(new Uint32Array([287454020]).buffer)[0],t.byteSwapIfBE=t.isLE?e=>e:e=>i(e);const s=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0"))),a={_0:48,_9:57,A:65,F:70,a:97,f:102};function c(e){return e>=a._0&&e<=a._9?e-a._0:e>=a.A&&e<=a.F?e-(a.A-10):e>=a.a&&e<=a.f?e-(a.a-10):void 0}function u(e){if("string"!=typeof e)throw new Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array((new TextEncoder).encode(e))}function f(e){return"string"==typeof e&&(e=u(e)),(0,o.abytes)(e),e}t.nextTick=async()=>{},t.Hash=class{clone(){return this._cloneInto()}}},202:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HashMD=void 0,t.setBigUint64=i,t.Chi=function(e,t,n){return e&t^~e&n},t.Maj=function(e,t,n){return e&t^e&n^t&n};const r=n(557),o=n(175);function i(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);const o=BigInt(32),i=BigInt(4294967295),s=Number(n>>o&i),a=Number(n&i),c=r?4:0,u=r?0:4;e.setUint32(t+c,s,r),e.setUint32(t+u,a,r)}class s extends o.Hash{constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,o.createView)(this.buffer)}update(e){(0,r.aexists)(this);const{view:t,buffer:n,blockLen:i}=this,s=(e=(0,o.toBytes)(e)).length;for(let r=0;r<s;){const a=Math.min(i-this.pos,s-r);if(a!==i)n.set(e.subarray(r,r+a),this.pos),this.pos+=a,r+=a,this.pos===i&&(this.process(t,0),this.pos=0);else{const t=(0,o.createView)(e);for(;i<=s-r;r+=i)this.process(t,r)}}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,r.aexists)(this),(0,r.aoutput)(e,this),this.finished=!0;const{buffer:t,view:n,blockLen:s,isLE:a}=this;let{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>s-c&&(this.process(n,0),c=0);for(let e=c;e<s;e++)t[e]=0;i(n,s-8,BigInt(8*this.length),a),this.process(n,0);const u=(0,o.createView)(e),f=this.outputLen;if(f%4)throw new Error("_sha2: outputLen should be aligned to 32bit");const l=f/4,h=this.get();if(l>h.length)throw new Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)u.setUint32(4*e,h[e],a)}digest(){const{buffer:e,outputLen:t}=this;this.digestInto(e);const n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());const{blockLen:t,buffer:n,length:r,finished:o,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=o,e.destroyed=i,r%t&&e.buffer.set(n),e}}t.HashMD=s},203:(e,t)=>{"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function r(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every((e=>"string"==typeof e)):t.every((e=>Number.isSafeInteger(e)))))}function o(e){if("function"!=typeof e)throw new Error("function expected");return!0}function i(e,t){if("string"!=typeof t)throw new Error(`${e}: string expected`);return!0}function s(e){if(!Number.isSafeInteger(e))throw new Error(`invalid integer: ${e}`)}function a(e){if(!Array.isArray(e))throw new Error("array expected")}function c(e,t){if(!r(!0,t))throw new Error(`${e}: array of strings expected`)}function u(e,t){if(!r(!1,t))throw new Error(`${e}: array of numbers expected`)}function f(...e){const t=e=>e,n=(e,t)=>n=>e(t(n));return{encode:e.map((e=>e.encode)).reduceRight(n,t),decode:e.map((e=>e.decode)).reduce(n,t)}}function l(e){const t="string"==typeof e?e.split(""):e,n=t.length;c("alphabet",t);const r=new Map(t.map(((e,t)=>[e,t])));return{encode:r=>(a(r),r.map((r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw new Error(`alphabet.encode: digit index outside alphabet "${r}". Allowed: ${e}`);return t[r]}))),decode:t=>(a(t),t.map((t=>{i("alphabet.decode",t);const n=r.get(t);if(void 0===n)throw new Error(`Unknown letter: "${t}". Allowed: ${e}`);return n})))}}function h(e=""){return i("join",e),{encode:t=>(c("join.decode",t),t.join(e)),decode:t=>(i("join.decode",t),t.split(e))}}function d(e,t="="){return s(e),i("padding",t),{encode(n){for(c("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){c("padding.decode",n);let r=n.length;if(r*e%8)throw new Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8==0)throw new Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}function p(e){return o(e),{encode:e=>e,decode:t=>e(t)}}function y(e,t,n){if(t<2)throw new Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(n<2)throw new Error(`convertRadix: invalid to=${n}, base cannot be less than 2`);if(a(e),!e.length)return[];let r=0;const o=[],i=Array.from(e,(e=>{if(s(e),e<0||e>=t)throw new Error(`invalid integer: ${e}`);return e})),c=i.length;for(;;){let e=0,s=!0;for(let o=r;o<c;o++){const a=i[o],c=t*e,u=c+a;if(!Number.isSafeInteger(u)||c/t!==e||u-a!==c)throw new Error("convertRadix: carry overflow");const f=u/n;e=u%n;const l=Math.floor(f);if(i[o]=l,!Number.isSafeInteger(l)||l*n+e!==u)throw new Error("convertRadix: carry overflow");s&&(l?s=!1:r=o)}if(o.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)o.push(0);return o.reverse()}Object.defineProperty(t,"__esModule",{value:!0}),t.bytes=t.stringToBytes=t.str=t.bytesToString=t.hex=t.utf8=t.bech32m=t.bech32=t.base58check=t.createBase58check=t.base58xmr=t.base58xrp=t.base58flickr=t.base58=t.base64urlnopad=t.base64url=t.base64nopad=t.base64=t.base32crockford=t.base32hexnopad=t.base32hex=t.base32nopad=t.base32=t.base16=t.utils=t.assertNumber=void 0,t.assertNumber=s;const g=(e,t)=>0===t?e:g(t,e%t),m=(e,t)=>e+(t-g(e,t)),w=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function b(e,t,n,r){if(a(e),t<=0||t>32)throw new Error(`convertRadix2: wrong from=${t}`);if(n<=0||n>32)throw new Error(`convertRadix2: wrong to=${n}`);if(m(t,n)>32)throw new Error(`convertRadix2: carry overflow from=${t} to=${n} carryBits=${m(t,n)}`);let o=0,i=0;const c=w[t],u=w[n]-1,f=[];for(const r of e){if(s(r),r>=c)throw new Error(`convertRadix2: invalid data word=${r} from=${t}`);if(o=o<<t|r,i+t>32)throw new Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=n;i-=n)f.push((o>>i-n&u)>>>0);const e=w[i];if(void 0===e)throw new Error("invalid carry");o&=e-1}if(o=o<<n-i&u,!r&&i>=t)throw new Error("Excess padding");if(!r&&o>0)throw new Error(`Non-zero padding: ${o}`);return r&&i>0&&f.push(o>>>0),f}function v(e){return s(e),{encode:t=>{if(!n(t))throw new Error("radix.encode input should be Uint8Array");return y(Array.from(t),256,e)},decode:t=>(u("radix.decode",t),Uint8Array.from(y(t,e,256)))}}function E(e,t=!1){if(s(e),e<=0||e>32)throw new Error("radix2: bits should be in (0..32]");if(m(8,e)>32||m(e,8)>32)throw new Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw new Error("radix2.encode input should be Uint8Array");return b(Array.from(r),8,e,!t)},decode:n=>(u("radix2.decode",n),Uint8Array.from(b(n,e,8,t)))}}function B(e){return o(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function x(e,t){return s(e),o(t),{encode(r){if(!n(r))throw new Error("checksum.encode: input should be Uint8Array");const o=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(o,r.length),i},decode(r){if(!n(r))throw new Error("checksum.decode: input should be Uint8Array");const o=r.slice(0,-e),i=r.slice(-e),s=t(o).slice(0,e);for(let t=0;t<e;t++)if(s[t]!==i[t])throw new Error("Invalid checksum");return o}}}t.utils={alphabet:l,chain:f,checksum:x,convertRadix:y,convertRadix2:b,radix:v,radix2:E,join:h,padding:d},t.base16=f(E(4),l("0123456789ABCDEF"),h("")),t.base32=f(E(5),l("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),d(5),h("")),t.base32nopad=f(E(5),l("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),h("")),t.base32hex=f(E(5),l("0123456789ABCDEFGHIJKLMNOPQRSTUV"),d(5),h("")),t.base32hexnopad=f(E(5),l("0123456789ABCDEFGHIJKLMNOPQRSTUV"),h("")),t.base32crockford=f(E(5),l("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),h(""),p((e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")))),t.base64=f(E(6),l("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),d(6),h("")),t.base64nopad=f(E(6),l("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),h("")),t.base64url=f(E(6),l("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),d(6),h("")),t.base64urlnopad=f(E(6),l("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),h(""));const k=e=>f(v(58),l(e),h(""));t.base58=k("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),t.base58flickr=k("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),t.base58xrp=k("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");const A=[0,2,3,5,6,7,9,10,11];t.base58xmr={encode(e){let n="";for(let r=0;r<e.length;r+=8){const o=e.subarray(r,r+8);n+=t.base58.encode(o).padStart(A[o.length],"1")}return n},decode(e){let n=[];for(let r=0;r<e.length;r+=11){const o=e.slice(r,r+11),i=A.indexOf(o.length),s=t.base58.decode(o);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw new Error("base58xmr: wrong padding");n=n.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(n)}},t.createBase58check=e=>f(x(4,(t=>e(e(t)))),t.base58),t.base58check=t.createBase58check;const S=f(l("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),h("")),I=[996825010,642813549,513874426,1027748829,705979059];function _(e){const t=e>>25;let n=(33554431&e)<<5;for(let e=0;e<I.length;e++)1==(t>>e&1)&&(n^=I[e]);return n}function T(e,t,n=1){const r=e.length;let o=1;for(let t=0;t<r;t++){const n=e.charCodeAt(t);if(n<33||n>126)throw new Error(`Invalid prefix (${e})`);o=_(o)^n>>5}o=_(o);for(let t=0;t<r;t++)o=_(o)^31&e.charCodeAt(t);for(let e of t)o=_(o)^e;for(let e=0;e<6;e++)o=_(o);return o^=n,S.encode(b([o%w[30]],30,5,!1))}function U(e){const t="bech32"===e?1:734539939,r=E(5),o=r.decode,s=r.encode,a=B(o);function c(e,r,o=90){i("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),u("bech32.encode",r);const s=e.length;if(0===s)throw new TypeError(`Invalid prefix length ${s}`);const a=s+7+r.length;if(!1!==o&&a>o)throw new TypeError(`Length ${a} exceeds limit ${o}`);const c=e.toLowerCase(),f=T(c,r,t);return`${c}1${S.encode(r)}${f}`}function f(e,n=90){i("bech32.decode input",e);const r=e.length;if(r<8||!1!==n&&r>n)throw new TypeError(`invalid string length: ${r} (${e}). Expected (8..${n})`);const o=e.toLowerCase();if(e!==o&&e!==e.toUpperCase())throw new Error("String must be lowercase or uppercase");const s=o.lastIndexOf("1");if(0===s||-1===s)throw new Error('Letter "1" must be present between prefix and data only');const a=o.slice(0,s),c=o.slice(s+1);if(c.length<6)throw new Error("Data must be at least 6 characters long");const u=S.decode(c).slice(0,-6),f=T(a,u,t);if(!c.endsWith(f))throw new Error(`Invalid checksum in ${e}: expected "${f}"`);return{prefix:a,words:u}}return{encode:c,decode:f,encodeFromBytes:function(e,t){return c(e,s(t))},decodeToBytes:function(e){const{prefix:t,words:n}=f(e,!1);return{prefix:t,words:n,bytes:o(n)}},decodeUnsafe:B(f),fromWords:o,fromWordsUnsafe:a,toWords:s}}t.bech32=U("bech32"),t.bech32m=U("bech32m"),t.utf8={encode:e=>(new TextDecoder).decode(e),decode:e=>(new TextEncoder).encode(e)},t.hex=f(E(4),l("0123456789abcdef"),h(""),p((e=>{if("string"!=typeof e||e.length%2!=0)throw new TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()})));const P={utf8:t.utf8,hex:t.hex,base16:t.base16,base32:t.base32,base64:t.base64,base64url:t.base64url,base58:t.base58,base58xmr:t.base58xmr},O="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";t.bytesToString=(e,t)=>{if("string"!=typeof e||!P.hasOwnProperty(e))throw new TypeError(O);if(!n(t))throw new TypeError("bytesToString() expects Uint8Array");return P[e].encode(t)},t.str=t.bytesToString,t.stringToBytes=(e,t)=>{if(!P.hasOwnProperty(e))throw new TypeError(O);if("string"!=typeof t)throw new TypeError("stringToBytes() expects string");return P[e].decode(t)},t.bytes=t.stringToBytes},238:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ripemd160=t.RIPEMD160=void 0;const r=n(202),o=n(175),i=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),s=new Uint8Array(new Array(16).fill(0).map(((e,t)=>t)));let a=[s],c=[s.map((e=>(9*e+5)%16))];for(let e=0;e<4;e++)for(let t of[a,c])t.push(t[e].map((e=>i[e])));const u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map((e=>new Uint8Array(e))),f=a.map(((e,t)=>e.map((e=>u[t][e])))),l=c.map(((e,t)=>e.map((e=>u[t][e])))),h=new Uint32Array([0,1518500249,1859775393,2400959708,2840853838]),d=new Uint32Array([1352829926,1548603684,1836072691,2053994217,0]);function p(e,t,n,r){return 0===e?t^n^r:1===e?t&n|~t&r:2===e?(t|~n)^r:3===e?t&r|n&~r:t^(n|~r)}const y=new Uint32Array(16);class g extends r.HashMD{constructor(){super(64,20,8,!0),this.h0=1732584193,this.h1=-271733879,this.h2=-1732584194,this.h3=271733878,this.h4=-1009589776}get(){const{h0:e,h1:t,h2:n,h3:r,h4:o}=this;return[e,t,n,r,o]}set(e,t,n,r,o){this.h0=0|e,this.h1=0|t,this.h2=0|n,this.h3=0|r,this.h4=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)y[n]=e.getUint32(t,!0);let n=0|this.h0,r=n,i=0|this.h1,s=i,u=0|this.h2,g=u,m=0|this.h3,w=m,b=0|this.h4,v=b;for(let e=0;e<5;e++){const t=4-e,E=h[e],B=d[e],x=a[e],k=c[e],A=f[e],S=l[e];for(let t=0;t<16;t++){const r=(0,o.rotl)(n+p(e,i,u,m)+y[x[t]]+E,A[t])+b|0;n=b,b=m,m=0|(0,o.rotl)(u,10),u=i,i=r}for(let e=0;e<16;e++){const n=(0,o.rotl)(r+p(t,s,g,w)+y[k[e]]+B,S[e])+v|0;r=v,v=w,w=0|(0,o.rotl)(g,10),g=s,s=n}}this.set(this.h1+u+w|0,this.h2+m+v|0,this.h3+b+r|0,this.h4+n+s|0,this.h0+i+g|0)}roundClean(){y.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}t.RIPEMD160=g,t.ripemd160=(0,o.wrapConstructor)((()=>new g))},251:(e,t)=>{t.read=function(e,t,n,r,o){var i,s,a=8*o-r-1,c=(1<<a)-1,u=c>>1,f=-7,l=n?o-1:0,h=n?-1:1,d=e[t+l];for(l+=h,i=d&(1<<-f)-1,d>>=-f,f+=a;f>0;i=256*i+e[t+l],l+=h,f-=8);for(s=i&(1<<-f)-1,i>>=-f,f+=r;f>0;s=256*s+e[t+l],l+=h,f-=8);if(0===i)i=1-u;else{if(i===c)return s?NaN:1/0*(d?-1:1);s+=Math.pow(2,r),i-=u}return(d?-1:1)*s*Math.pow(2,i-r)},t.write=function(e,t,n,r,o,i){var s,a,c,u=8*i-o-1,f=(1<<u)-1,l=f>>1,h=23===o?Math.pow(2,-24)-Math.pow(2,-77):0,d=r?0:i-1,p=r?1:-1,y=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(a=isNaN(t)?1:0,s=f):(s=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-s))<1&&(s--,c*=2),(t+=s+l>=1?h/c:h*Math.pow(2,1-l))*c>=2&&(s++,c/=2),s+l>=f?(a=0,s=f):s+l>=1?(a=(t*c-1)*Math.pow(2,o),s+=l):(a=t*Math.pow(2,l-1)*Math.pow(2,o),s=0));o>=8;e[n+d]=255&a,d+=p,a/=256,o-=8);for(s=s<<o|a,u+=o;u>0;e[n+d]=255&s,d+=p,s/=256,u-=8);e[n+d-p]|=128*y}},278:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSignedProof=t.getSignedOutputs=t.getSignedOutput=t.getSignedProofs=t.signBlindedMessage=t.signP2PKsecret=t.createP2PKsecret=void 0;const r=n(484),o=n(623),i=n(510),s=n(175),a=n(372);t.createP2PKsecret=e=>{const t=["P2PK",{nonce:(0,r.bytesToHex)((0,s.randomBytes)(32)),data:e}],n=JSON.stringify(t);return(new TextEncoder).encode(n)},t.signP2PKsecret=(e,t)=>{const n=(0,o.sha256)((new TextDecoder).decode(e));return i.schnorr.sign(n,t)},t.signBlindedMessage=(e,t)=>{const n=(0,o.sha256)(e);return i.schnorr.sign(n,t)},t.getSignedProofs=(e,n)=>e.map((e=>{try{if("P2PK"!==(0,a.parseSecret)(e.secret)[0])throw new Error("unknown secret type");return(0,t.getSignedProof)(e,(0,r.hexToBytes)(n))}catch(t){return e}})),t.getSignedOutput=(e,n)=>{const o=e.B_.toHex(!0),i=(0,t.signBlindedMessage)(o,n);return e.witness={signatures:[(0,r.bytesToHex)(i)]},e},t.getSignedOutputs=(e,n)=>e.map((e=>(0,t.getSignedOutput)(e,n))),t.getSignedProof=(e,n)=>(e.witness||(e.witness={signatures:[(0,r.bytesToHex)((0,t.signP2PKsecret)(e.secret,n))]}),e)},287:(e,t,n)=>{"use strict";const r=n(526),o=n(251),i="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;t.Buffer=c,t.SlowBuffer=function(e){return+e!=e&&(e=0),c.alloc(+e)},t.INSPECT_MAX_BYTES=50;const s=2147483647;function a(e){if(e>s)throw new RangeError('The value "'+e+'" is invalid for option "size"');const t=new Uint8Array(e);return Object.setPrototypeOf(t,c.prototype),t}function c(e,t,n){if("number"==typeof e){if("string"==typeof t)throw new TypeError('The "string" argument must be of type string. Received type number');return l(e)}return u(e,t,n)}function u(e,t,n){if("string"==typeof e)return function(e,t){if("string"==typeof t&&""!==t||(t="utf8"),!c.isEncoding(t))throw new TypeError("Unknown encoding: "+t);const n=0|y(e,t);let r=a(n);const o=r.write(e,t);return o!==n&&(r=r.slice(0,o)),r}(e,t);if(ArrayBuffer.isView(e))return function(e){if(Q(e,Uint8Array)){const t=new Uint8Array(e);return d(t.buffer,t.byteOffset,t.byteLength)}return h(e)}(e);if(null==e)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e);if(Q(e,ArrayBuffer)||e&&Q(e.buffer,ArrayBuffer))return d(e,t,n);if("undefined"!=typeof SharedArrayBuffer&&(Q(e,SharedArrayBuffer)||e&&Q(e.buffer,SharedArrayBuffer)))return d(e,t,n);if("number"==typeof e)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=e.valueOf&&e.valueOf();if(null!=r&&r!==e)return c.from(r,t,n);const o=function(e){if(c.isBuffer(e)){const t=0|p(e.length),n=a(t);return 0===n.length||e.copy(n,0,0,t),n}return void 0!==e.length?"number"!=typeof e.length||Z(e.length)?a(0):h(e):"Buffer"===e.type&&Array.isArray(e.data)?h(e.data):void 0}(e);if(o)return o;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof e[Symbol.toPrimitive])return c.from(e[Symbol.toPrimitive]("string"),t,n);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof e)}function f(e){if("number"!=typeof e)throw new TypeError('"size" argument must be of type number');if(e<0)throw new RangeError('The value "'+e+'" is invalid for option "size"')}function l(e){return f(e),a(e<0?0:0|p(e))}function h(e){const t=e.length<0?0:0|p(e.length),n=a(t);for(let r=0;r<t;r+=1)n[r]=255&e[r];return n}function d(e,t,n){if(t<0||e.byteLength<t)throw new RangeError('"offset" is outside of buffer bounds');if(e.byteLength<t+(n||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===t&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,t):new Uint8Array(e,t,n),Object.setPrototypeOf(r,c.prototype),r}function p(e){if(e>=s)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+s.toString(16)+" bytes");return 0|e}function y(e,t){if(c.isBuffer(e))return e.length;if(ArrayBuffer.isView(e)||Q(e,ArrayBuffer))return e.byteLength;if("string"!=typeof e)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof e);const n=e.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===n)return 0;let o=!1;for(;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":return V(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return W(e).length;default:if(o)return r?-1:V(e).length;t=(""+t).toLowerCase(),o=!0}}function g(e,t,n){let r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if((n>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return U(this,t,n);case"utf8":case"utf-8":return S(this,t,n);case"ascii":return _(this,t,n);case"latin1":case"binary":return T(this,t,n);case"base64":return A(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function m(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function w(e,t,n,r,o){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),Z(n=+n)&&(n=o?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(o)return-1;n=e.length-1}else if(n<0){if(!o)return-1;n=0}if("string"==typeof t&&(t=c.from(t,r)),c.isBuffer(t))return 0===t.length?-1:b(e,t,n,r,o);if("number"==typeof t)return t&=255,"function"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):b(e,[t],n,r,o);throw new TypeError("val must be string, number or Buffer")}function b(e,t,n,r,o){let i,s=1,a=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;s=2,a/=2,c/=2,n/=2}function u(e,t){return 1===s?e[t]:e.readUInt16BE(t*s)}if(o){let r=-1;for(i=n;i<a;i++)if(u(e,i)===u(t,-1===r?0:i-r)){if(-1===r&&(r=i),i-r+1===c)return r*s}else-1!==r&&(i-=i-r),r=-1}else for(n+c>a&&(n=a-c),i=n;i>=0;i--){let n=!0;for(let r=0;r<c;r++)if(u(e,i+r)!==u(t,r)){n=!1;break}if(n)return i}return-1}function v(e,t,n,r){n=Number(n)||0;const o=e.length-n;r?(r=Number(r))>o&&(r=o):r=o;const i=t.length;let s;for(r>i/2&&(r=i/2),s=0;s<r;++s){const r=parseInt(t.substr(2*s,2),16);if(Z(r))return s;e[n+s]=r}return s}function E(e,t,n,r){return G(V(t,e.length-n),e,n,r)}function B(e,t,n,r){return G(function(e){const t=[];for(let n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}(t),e,n,r)}function x(e,t,n,r){return G(W(t),e,n,r)}function k(e,t,n,r){return G(function(e,t){let n,r,o;const i=[];for(let s=0;s<e.length&&!((t-=2)<0);++s)n=e.charCodeAt(s),r=n>>8,o=n%256,i.push(o),i.push(r);return i}(t,e.length-n),e,n,r)}function A(e,t,n){return 0===t&&n===e.length?r.fromByteArray(e):r.fromByteArray(e.slice(t,n))}function S(e,t,n){n=Math.min(e.length,n);const r=[];let o=t;for(;o<n;){const t=e[o];let i=null,s=t>239?4:t>223?3:t>191?2:1;if(o+s<=n){let n,r,a,c;switch(s){case 1:t<128&&(i=t);break;case 2:n=e[o+1],128==(192&n)&&(c=(31&t)<<6|63&n,c>127&&(i=c));break;case 3:n=e[o+1],r=e[o+2],128==(192&n)&&128==(192&r)&&(c=(15&t)<<12|(63&n)<<6|63&r,c>2047&&(c<55296||c>57343)&&(i=c));break;case 4:n=e[o+1],r=e[o+2],a=e[o+3],128==(192&n)&&128==(192&r)&&128==(192&a)&&(c=(15&t)<<18|(63&n)<<12|(63&r)<<6|63&a,c>65535&&c<1114112&&(i=c))}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),o+=s}return function(e){const t=e.length;if(t<=I)return String.fromCharCode.apply(String,e);let n="",r=0;for(;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=I));return n}(r)}t.kMaxLength=s,c.TYPED_ARRAY_SUPPORT=function(){try{const e=new Uint8Array(1),t={foo:function(){return 42}};return Object.setPrototypeOf(t,Uint8Array.prototype),Object.setPrototypeOf(e,t),42===e.foo()}catch(e){return!1}}(),c.TYPED_ARRAY_SUPPORT||"undefined"==typeof console||"function"!=typeof console.error||console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(c.prototype,"parent",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.buffer}}),Object.defineProperty(c.prototype,"offset",{enumerable:!0,get:function(){if(c.isBuffer(this))return this.byteOffset}}),c.poolSize=8192,c.from=function(e,t,n){return u(e,t,n)},Object.setPrototypeOf(c.prototype,Uint8Array.prototype),Object.setPrototypeOf(c,Uint8Array),c.alloc=function(e,t,n){return function(e,t,n){return f(e),e<=0?a(e):void 0!==t?"string"==typeof n?a(e).fill(t,n):a(e).fill(t):a(e)}(e,t,n)},c.allocUnsafe=function(e){return l(e)},c.allocUnsafeSlow=function(e){return l(e)},c.isBuffer=function(e){return null!=e&&!0===e._isBuffer&&e!==c.prototype},c.compare=function(e,t){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),Q(t,Uint8Array)&&(t=c.from(t,t.offset,t.byteLength)),!c.isBuffer(e)||!c.isBuffer(t))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(e===t)return 0;let n=e.length,r=t.length;for(let o=0,i=Math.min(n,r);o<i;++o)if(e[o]!==t[o]){n=e[o],r=t[o];break}return n<r?-1:r<n?1:0},c.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},c.concat=function(e,t){if(!Array.isArray(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return c.alloc(0);let n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;const r=c.allocUnsafe(t);let o=0;for(n=0;n<e.length;++n){let t=e[n];if(Q(t,Uint8Array))o+t.length>r.length?(c.isBuffer(t)||(t=c.from(t)),t.copy(r,o)):Uint8Array.prototype.set.call(r,t,o);else{if(!c.isBuffer(t))throw new TypeError('"list" argument must be an Array of Buffers');t.copy(r,o)}o+=t.length}return r},c.byteLength=y,c.prototype._isBuffer=!0,c.prototype.swap16=function(){const e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let t=0;t<e;t+=2)m(this,t,t+1);return this},c.prototype.swap32=function(){const e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},c.prototype.swap64=function(){const e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},c.prototype.toString=function(){const e=this.length;return 0===e?"":0===arguments.length?S(this,0,e):g.apply(this,arguments)},c.prototype.toLocaleString=c.prototype.toString,c.prototype.equals=function(e){if(!c.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===c.compare(this,e)},c.prototype.inspect=function(){let e="";const n=t.INSPECT_MAX_BYTES;return e=this.toString("hex",0,n).replace(/(.{2})/g,"$1 ").trim(),this.length>n&&(e+=" ... "),"<Buffer "+e+">"},i&&(c.prototype[i]=c.prototype.inspect),c.prototype.compare=function(e,t,n,r,o){if(Q(e,Uint8Array)&&(e=c.from(e,e.offset,e.byteLength)),!c.isBuffer(e))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof e);if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),t<0||n>e.length||r<0||o>this.length)throw new RangeError("out of range index");if(r>=o&&t>=n)return 0;if(r>=o)return-1;if(t>=n)return 1;if(this===e)return 0;let i=(o>>>=0)-(r>>>=0),s=(n>>>=0)-(t>>>=0);const a=Math.min(i,s),u=this.slice(r,o),f=e.slice(t,n);for(let e=0;e<a;++e)if(u[e]!==f[e]){i=u[e],s=f[e];break}return i<s?-1:s<i?1:0},c.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},c.prototype.indexOf=function(e,t,n){return w(this,e,t,n,!0)},c.prototype.lastIndexOf=function(e,t,n){return w(this,e,t,n,!1)},c.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}const o=this.length-t;if((void 0===n||n>o)&&(n=o),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let i=!1;for(;;)switch(r){case"hex":return v(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":case"latin1":case"binary":return B(this,e,t,n);case"base64":return x(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,t,n);default:if(i)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),i=!0}},c.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const I=4096;function _(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(127&e[o]);return r}function T(e,t,n){let r="";n=Math.min(e.length,n);for(let o=t;o<n;++o)r+=String.fromCharCode(e[o]);return r}function U(e,t,n){const r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);let o="";for(let r=t;r<n;++r)o+=Y[e[r]];return o}function P(e,t,n){const r=e.slice(t,n);let o="";for(let e=0;e<r.length-1;e+=2)o+=String.fromCharCode(r[e]+256*r[e+1]);return o}function O(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function L(e,t,n,r,o,i){if(!c.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>o||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function R(e,t,n,r,o){K(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i,i>>=8,e[n++]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,s>>=8,e[n++]=s,n}function C(e,t,n,r,o){K(t,r,o,e,n,7);let i=Number(t&BigInt(4294967295));e[n+7]=i,i>>=8,e[n+6]=i,i>>=8,e[n+5]=i,i>>=8,e[n+4]=i;let s=Number(t>>BigInt(32)&BigInt(4294967295));return e[n+3]=s,s>>=8,e[n+2]=s,s>>=8,e[n+1]=s,s>>=8,e[n]=s,n+8}function M(e,t,n,r,o,i){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function H(e,t,n,r,i){return t=+t,n>>>=0,i||M(e,0,n,4),o.write(e,t,n,r,23,4),n+4}function F(e,t,n,r,i){return t=+t,n>>>=0,i||M(e,0,n,8),o.write(e,t,n,r,52,8),n+8}c.prototype.slice=function(e,t){const n=this.length;(e=~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),(t=void 0===t?n:~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);const r=this.subarray(e,t);return Object.setPrototypeOf(r,c.prototype),r},c.prototype.readUintLE=c.prototype.readUIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return r},c.prototype.readUintBE=c.prototype.readUIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e+--t],o=1;for(;t>0&&(o*=256);)r+=this[e+--t]*o;return r},c.prototype.readUint8=c.prototype.readUInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),this[e]},c.prototype.readUint16LE=c.prototype.readUInt16LE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]|this[e+1]<<8},c.prototype.readUint16BE=c.prototype.readUInt16BE=function(e,t){return e>>>=0,t||O(e,2,this.length),this[e]<<8|this[e+1]},c.prototype.readUint32LE=c.prototype.readUInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},c.prototype.readUint32BE=c.prototype.readUInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},c.prototype.readBigUInt64LE=J((function(e){j(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=t+256*this[++e]+65536*this[++e]+this[++e]*2**24,o=this[++e]+256*this[++e]+65536*this[++e]+n*2**24;return BigInt(r)+(BigInt(o)<<BigInt(32))})),c.prototype.readBigUInt64BE=J((function(e){j(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=t*2**24+65536*this[++e]+256*this[++e]+this[++e],o=this[++e]*2**24+65536*this[++e]+256*this[++e]+n;return(BigInt(r)<<BigInt(32))+BigInt(o)})),c.prototype.readIntLE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=this[e],o=1,i=0;for(;++i<t&&(o*=256);)r+=this[e+i]*o;return o*=128,r>=o&&(r-=Math.pow(2,8*t)),r},c.prototype.readIntBE=function(e,t,n){e>>>=0,t>>>=0,n||O(e,t,this.length);let r=t,o=1,i=this[e+--r];for(;r>0&&(o*=256);)i+=this[e+--r]*o;return o*=128,i>=o&&(i-=Math.pow(2,8*t)),i},c.prototype.readInt8=function(e,t){return e>>>=0,t||O(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},c.prototype.readInt16LE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt16BE=function(e,t){e>>>=0,t||O(e,2,this.length);const n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},c.prototype.readInt32LE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},c.prototype.readInt32BE=function(e,t){return e>>>=0,t||O(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},c.prototype.readBigInt64LE=J((function(e){j(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=this[e+4]+256*this[e+5]+65536*this[e+6]+(n<<24);return(BigInt(r)<<BigInt(32))+BigInt(t+256*this[++e]+65536*this[++e]+this[++e]*2**24)})),c.prototype.readBigInt64BE=J((function(e){j(e>>>=0,"offset");const t=this[e],n=this[e+7];void 0!==t&&void 0!==n||z(e,this.length-8);const r=(t<<24)+65536*this[++e]+256*this[++e]+this[++e];return(BigInt(r)<<BigInt(32))+BigInt(this[++e]*2**24+65536*this[++e]+256*this[++e]+n)})),c.prototype.readFloatLE=function(e,t){return e>>>=0,t||O(e,4,this.length),o.read(this,e,!0,23,4)},c.prototype.readFloatBE=function(e,t){return e>>>=0,t||O(e,4,this.length),o.read(this,e,!1,23,4)},c.prototype.readDoubleLE=function(e,t){return e>>>=0,t||O(e,8,this.length),o.read(this,e,!0,52,8)},c.prototype.readDoubleBE=function(e,t){return e>>>=0,t||O(e,8,this.length),o.read(this,e,!1,52,8)},c.prototype.writeUintLE=c.prototype.writeUIntLE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);let o=1,i=0;for(this[t]=255&e;++i<n&&(o*=256);)this[t+i]=e/o&255;return t+n},c.prototype.writeUintBE=c.prototype.writeUIntBE=function(e,t,n,r){e=+e,t>>>=0,n>>>=0,r||L(this,e,t,n,Math.pow(2,8*n)-1,0);let o=n-1,i=1;for(this[t+o]=255&e;--o>=0&&(i*=256);)this[t+o]=e/i&255;return t+n},c.prototype.writeUint8=c.prototype.writeUInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,255,0),this[t]=255&e,t+1},c.prototype.writeUint16LE=c.prototype.writeUInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeUint16BE=c.prototype.writeUInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,65535,0),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeUint32LE=c.prototype.writeUInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e,t+4},c.prototype.writeUint32BE=c.prototype.writeUInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,4294967295,0),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigUInt64LE=J((function(e,t=0){return R(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeBigUInt64BE=J((function(e,t=0){return C(this,e,t,BigInt(0),BigInt("0xffffffffffffffff"))})),c.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+n},c.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t>>>=0,!r){const r=Math.pow(2,8*n-1);L(this,e,t,n,r-1,-r)}let o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i|0)-s&255;return t+n},c.prototype.writeInt8=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,1,127,-128),e<0&&(e=255+e+1),this[t]=255&e,t+1},c.prototype.writeInt16LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=255&e,this[t+1]=e>>>8,t+2},c.prototype.writeInt16BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,2,32767,-32768),this[t]=e>>>8,this[t+1]=255&e,t+2},c.prototype.writeInt32LE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24,t+4},c.prototype.writeInt32BE=function(e,t,n){return e=+e,t>>>=0,n||L(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e,t+4},c.prototype.writeBigInt64LE=J((function(e,t=0){return R(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeBigInt64BE=J((function(e,t=0){return C(this,e,t,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))})),c.prototype.writeFloatLE=function(e,t,n){return H(this,e,t,!0,n)},c.prototype.writeFloatBE=function(e,t,n){return H(this,e,t,!1,n)},c.prototype.writeDoubleLE=function(e,t,n){return F(this,e,t,!0,n)},c.prototype.writeDoubleBE=function(e,t,n){return F(this,e,t,!1,n)},c.prototype.copy=function(e,t,n,r){if(!c.isBuffer(e))throw new TypeError("argument should be a Buffer");if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);const o=r-n;return this===e&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(t,n,r):Uint8Array.prototype.set.call(e,this.subarray(n,r),t),o},c.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!c.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===e.length){const t=e.charCodeAt(0);("utf8"===r&&t<128||"latin1"===r)&&(e=t)}}else"number"==typeof e?e&=255:"boolean"==typeof e&&(e=Number(e));if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;let o;if(t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0),"number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{const i=c.isBuffer(e)?e:c.from(e,r),s=i.length;if(0===s)throw new TypeError('The value "'+e+'" is invalid for argument "value"');for(o=0;o<n-t;++o)this[o+t]=i[o%s]}return this};const N={};function D(e,t,n){N[e]=class extends n{constructor(){super(),Object.defineProperty(this,"message",{value:t.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${e}]`,this.stack,delete this.name}get code(){return e}set code(e){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:e,writable:!0})}toString(){return`${this.name} [${e}]: ${this.message}`}}}function q(e){let t="",n=e.length;const r="-"===e[0]?1:0;for(;n>=r+4;n-=3)t=`_${e.slice(n-3,n)}${t}`;return`${e.slice(0,n)}${t}`}function K(e,t,n,r,o,i){if(e>n||e<t){const r="bigint"==typeof t?"n":"";let o;throw o=i>3?0===t||t===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(i+1)}${r}`:`>= -(2${r} ** ${8*(i+1)-1}${r}) and < 2 ** ${8*(i+1)-1}${r}`:`>= ${t}${r} and <= ${n}${r}`,new N.ERR_OUT_OF_RANGE("value",o,e)}!function(e,t,n){j(t,"offset"),void 0!==e[t]&&void 0!==e[t+n]||z(t,e.length-(n+1))}(r,o,i)}function j(e,t){if("number"!=typeof e)throw new N.ERR_INVALID_ARG_TYPE(t,"number",e)}function z(e,t,n){if(Math.floor(e)!==e)throw j(e,n),new N.ERR_OUT_OF_RANGE(n||"offset","an integer",e);if(t<0)throw new N.ERR_BUFFER_OUT_OF_BOUNDS;throw new N.ERR_OUT_OF_RANGE(n||"offset",`>= ${n?1:0} and <= ${t}`,e)}D("ERR_BUFFER_OUT_OF_BOUNDS",(function(e){return e?`${e} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"}),RangeError),D("ERR_INVALID_ARG_TYPE",(function(e,t){return`The "${e}" argument must be of type number. Received type ${typeof t}`}),TypeError),D("ERR_OUT_OF_RANGE",(function(e,t,n){let r=`The value of "${e}" is out of range.`,o=n;return Number.isInteger(n)&&Math.abs(n)>2**32?o=q(String(n)):"bigint"==typeof n&&(o=String(n),(n>BigInt(2)**BigInt(32)||n<-(BigInt(2)**BigInt(32)))&&(o=q(o)),o+="n"),r+=` It must be ${t}. Received ${o}`,r}),RangeError);const $=/[^+/0-9A-Za-z-_]/g;function V(e,t){let n;t=t||1/0;const r=e.length;let o=null;const i=[];for(let s=0;s<r;++s){if(n=e.charCodeAt(s),n>55295&&n<57344){if(!o){if(n>56319){(t-=3)>-1&&i.push(239,191,189);continue}if(s+1===r){(t-=3)>-1&&i.push(239,191,189);continue}o=n;continue}if(n<56320){(t-=3)>-1&&i.push(239,191,189),o=n;continue}n=65536+(o-55296<<10|n-56320)}else o&&(t-=3)>-1&&i.push(239,191,189);if(o=null,n<128){if((t-=1)<0)break;i.push(n)}else if(n<2048){if((t-=2)<0)break;i.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;i.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;i.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return i}function W(e){return r.toByteArray(function(e){if((e=(e=e.split("=")[0]).trim().replace($,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function G(e,t,n,r){let o;for(o=0;o<r&&!(o+n>=t.length||o>=e.length);++o)t[o+n]=e[o];return o}function Q(e,t){return e instanceof t||null!=e&&null!=e.constructor&&null!=e.constructor.name&&e.constructor.name===t.name}function Z(e){return e!=e}const Y=function(){const e="0123456789abcdef",t=new Array(256);for(let n=0;n<16;++n){const r=16*n;for(let o=0;o<16;++o)t[r+o]=e[n]+e[o]}return t}();function J(e){return"undefined"==typeof BigInt?X:e}function X(){throw new Error("BigInt not supported")}},318:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.add5L=t.add5H=t.add4H=t.add4L=t.add3H=t.add3L=t.rotlBL=t.rotlBH=t.rotlSL=t.rotlSH=t.rotr32L=t.rotr32H=t.rotrBL=t.rotrBH=t.rotrSL=t.rotrSH=t.shrSL=t.shrSH=t.toBig=void 0,t.fromBig=o,t.split=i,t.add=b;const n=BigInt(2**32-1),r=BigInt(32);function o(e,t=!1){return t?{h:Number(e&n),l:Number(e>>r&n)}:{h:0|Number(e>>r&n),l:0|Number(e&n)}}function i(e,t=!1){let n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let i=0;i<e.length;i++){const{h:s,l:a}=o(e[i],t);[n[i],r[i]]=[s,a]}return[n,r]}const s=(e,t)=>BigInt(e>>>0)<<r|BigInt(t>>>0);t.toBig=s;const a=(e,t,n)=>e>>>n;t.shrSH=a;const c=(e,t,n)=>e<<32-n|t>>>n;t.shrSL=c;const u=(e,t,n)=>e>>>n|t<<32-n;t.rotrSH=u;const f=(e,t,n)=>e<<32-n|t>>>n;t.rotrSL=f;const l=(e,t,n)=>e<<64-n|t>>>n-32;t.rotrBH=l;const h=(e,t,n)=>e>>>n-32|t<<64-n;t.rotrBL=h;const d=(e,t)=>t;t.rotr32H=d;const p=(e,t)=>e;t.rotr32L=p;const y=(e,t,n)=>e<<n|t>>>32-n;t.rotlSH=y;const g=(e,t,n)=>t<<n|e>>>32-n;t.rotlSL=g;const m=(e,t,n)=>t<<n-32|e>>>64-n;t.rotlBH=m;const w=(e,t,n)=>e<<n-32|t>>>64-n;function b(e,t,n,r){const o=(t>>>0)+(r>>>0);return{h:e+n+(o/2**32|0)|0,l:0|o}}t.rotlBL=w;const v=(e,t,n)=>(e>>>0)+(t>>>0)+(n>>>0);t.add3L=v;const E=(e,t,n,r)=>t+n+r+(e/2**32|0)|0;t.add3H=E;const B=(e,t,n,r)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0);t.add4L=B;const x=(e,t,n,r,o)=>t+n+r+o+(e/2**32|0)|0;t.add4H=x;const k=(e,t,n,r,o)=>(e>>>0)+(t>>>0)+(n>>>0)+(r>>>0)+(o>>>0);t.add5L=k;const A=(e,t,n,r,o,i)=>t+n+r+o+i+(e/2**32|0)|0;t.add5H=A;const S={fromBig:o,split:i,toBig:s,shrSH:a,shrSL:c,rotrSH:u,rotrSL:f,rotrBH:l,rotrBL:h,rotr32H:d,rotr32L:p,rotlSH:y,rotlSL:g,rotlBH:m,rotlBL:w,add:b,add3L:v,add3H:E,add4L:B,add4H:x,add5H:A,add5L:k};t.default=S},341:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.generateMnemonic=function(e,t=128){if((0,r.anumber)(t),t%32!=0||t>256)throw new TypeError("Invalid entropy");return g((0,a.randomBytes)(t/8),e)},t.mnemonicToEntropy=y,t.entropyToMnemonic=g,t.validateMnemonic=function(e,t){try{y(e,t)}catch(e){return!1}return!0},t.mnemonicToSeed=function(e,t=""){return(0,o.pbkdf2Async)(s.sha512,l(e).nfkd,m(t),{c:2048,dkLen:64})},t.mnemonicToSeedSync=function(e,t=""){return(0,o.pbkdf2)(s.sha512,l(e).nfkd,m(t),{c:2048,dkLen:64})};const r=n(557),o=n(941),i=n(623),s=n(102),a=n(175),c=n(203),u=e=>""===e[0];function f(e){if("string"!=typeof e)throw new TypeError("invalid mnemonic type: "+typeof e);return e.normalize("NFKD")}function l(e){const t=f(e),n=t.split(" ");if(![12,15,18,21,24].includes(n.length))throw new Error("Invalid mnemonic");return{nfkd:t,words:n}}function h(e){(0,r.abytes)(e,16,20,24,28,32)}const d=e=>{const t=8-e.length/4;return new Uint8Array([(0,i.sha256)(e)[0]>>t<<t])};function p(e){if(!Array.isArray(e)||2048!==e.length||"string"!=typeof e[0])throw new Error("Wordlist: expected array of 2048 strings");return e.forEach((e=>{if("string"!=typeof e)throw new Error("wordlist: non-string element: "+e)})),c.utils.chain(c.utils.checksum(1,d),c.utils.radix2(11,!0),c.utils.alphabet(e))}function y(e,t){const{words:n}=l(e),r=p(t).decode(n);return h(r),r}function g(e,t){return h(e),p(t).encode(e).join(u(t)?"":" ")}const m=e=>f("mnemonic"+e)},372:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseSecret=void 0,t.parseSecret=e=>{try{return e instanceof Uint8Array&&(e=(new TextDecoder).decode(e)),JSON.parse(e)}catch(e){throw new Error("can't parse secret")}}},375:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wordlist=void 0,t.wordlist="abandon\nability\nable\nabout\nabove\nabsent\nabsorb\nabstract\nabsurd\nabuse\naccess\naccident\naccount\naccuse\nachieve\nacid\nacoustic\nacquire\nacross\nact\naction\nactor\nactress\nactual\nadapt\nadd\naddict\naddress\nadjust\nadmit\nadult\nadvance\nadvice\naerobic\naffair\nafford\nafraid\nagain\nage\nagent\nagree\nahead\naim\nair\nairport\naisle\nalarm\nalbum\nalcohol\nalert\nalien\nall\nalley\nallow\nalmost\nalone\nalpha\nalready\nalso\nalter\nalways\namateur\namazing\namong\namount\namused\nanalyst\nanchor\nancient\nanger\nangle\nangry\nanimal\nankle\nannounce\nannual\nanother\nanswer\nantenna\nantique\nanxiety\nany\napart\napology\nappear\napple\napprove\napril\narch\narctic\narea\narena\nargue\narm\narmed\narmor\narmy\naround\narrange\narrest\narrive\narrow\nart\nartefact\nartist\nartwork\nask\naspect\nassault\nasset\nassist\nassume\nasthma\nathlete\natom\nattack\nattend\nattitude\nattract\nauction\naudit\naugust\naunt\nauthor\nauto\nautumn\naverage\navocado\navoid\nawake\naware\naway\nawesome\nawful\nawkward\naxis\nbaby\nbachelor\nbacon\nbadge\nbag\nbalance\nbalcony\nball\nbamboo\nbanana\nbanner\nbar\nbarely\nbargain\nbarrel\nbase\nbasic\nbasket\nbattle\nbeach\nbean\nbeauty\nbecause\nbecome\nbeef\nbefore\nbegin\nbehave\nbehind\nbelieve\nbelow\nbelt\nbench\nbenefit\nbest\nbetray\nbetter\nbetween\nbeyond\nbicycle\nbid\nbike\nbind\nbiology\nbird\nbirth\nbitter\nblack\nblade\nblame\nblanket\nblast\nbleak\nbless\nblind\nblood\nblossom\nblouse\nblue\nblur\nblush\nboard\nboat\nbody\nboil\nbomb\nbone\nbonus\nbook\nboost\nborder\nboring\nborrow\nboss\nbottom\nbounce\nbox\nboy\nbracket\nbrain\nbrand\nbrass\nbrave\nbread\nbreeze\nbrick\nbridge\nbrief\nbright\nbring\nbrisk\nbroccoli\nbroken\nbronze\nbroom\nbrother\nbrown\nbrush\nbubble\nbuddy\nbudget\nbuffalo\nbuild\nbulb\nbulk\nbullet\nbundle\nbunker\nburden\nburger\nburst\nbus\nbusiness\nbusy\nbutter\nbuyer\nbuzz\ncabbage\ncabin\ncable\ncactus\ncage\ncake\ncall\ncalm\ncamera\ncamp\ncan\ncanal\ncancel\ncandy\ncannon\ncanoe\ncanvas\ncanyon\ncapable\ncapital\ncaptain\ncar\ncarbon\ncard\ncargo\ncarpet\ncarry\ncart\ncase\ncash\ncasino\ncastle\ncasual\ncat\ncatalog\ncatch\ncategory\ncattle\ncaught\ncause\ncaution\ncave\nceiling\ncelery\ncement\ncensus\ncentury\ncereal\ncertain\nchair\nchalk\nchampion\nchange\nchaos\nchapter\ncharge\nchase\nchat\ncheap\ncheck\ncheese\nchef\ncherry\nchest\nchicken\nchief\nchild\nchimney\nchoice\nchoose\nchronic\nchuckle\nchunk\nchurn\ncigar\ncinnamon\ncircle\ncitizen\ncity\ncivil\nclaim\nclap\nclarify\nclaw\nclay\nclean\nclerk\nclever\nclick\nclient\ncliff\nclimb\nclinic\nclip\nclock\nclog\nclose\ncloth\ncloud\nclown\nclub\nclump\ncluster\nclutch\ncoach\ncoast\ncoconut\ncode\ncoffee\ncoil\ncoin\ncollect\ncolor\ncolumn\ncombine\ncome\ncomfort\ncomic\ncommon\ncompany\nconcert\nconduct\nconfirm\ncongress\nconnect\nconsider\ncontrol\nconvince\ncook\ncool\ncopper\ncopy\ncoral\ncore\ncorn\ncorrect\ncost\ncotton\ncouch\ncountry\ncouple\ncourse\ncousin\ncover\ncoyote\ncrack\ncradle\ncraft\ncram\ncrane\ncrash\ncrater\ncrawl\ncrazy\ncream\ncredit\ncreek\ncrew\ncricket\ncrime\ncrisp\ncritic\ncrop\ncross\ncrouch\ncrowd\ncrucial\ncruel\ncruise\ncrumble\ncrunch\ncrush\ncry\ncrystal\ncube\nculture\ncup\ncupboard\ncurious\ncurrent\ncurtain\ncurve\ncushion\ncustom\ncute\ncycle\ndad\ndamage\ndamp\ndance\ndanger\ndaring\ndash\ndaughter\ndawn\nday\ndeal\ndebate\ndebris\ndecade\ndecember\ndecide\ndecline\ndecorate\ndecrease\ndeer\ndefense\ndefine\ndefy\ndegree\ndelay\ndeliver\ndemand\ndemise\ndenial\ndentist\ndeny\ndepart\ndepend\ndeposit\ndepth\ndeputy\nderive\ndescribe\ndesert\ndesign\ndesk\ndespair\ndestroy\ndetail\ndetect\ndevelop\ndevice\ndevote\ndiagram\ndial\ndiamond\ndiary\ndice\ndiesel\ndiet\ndiffer\ndigital\ndignity\ndilemma\ndinner\ndinosaur\ndirect\ndirt\ndisagree\ndiscover\ndisease\ndish\ndismiss\ndisorder\ndisplay\ndistance\ndivert\ndivide\ndivorce\ndizzy\ndoctor\ndocument\ndog\ndoll\ndolphin\ndomain\ndonate\ndonkey\ndonor\ndoor\ndose\ndouble\ndove\ndraft\ndragon\ndrama\ndrastic\ndraw\ndream\ndress\ndrift\ndrill\ndrink\ndrip\ndrive\ndrop\ndrum\ndry\nduck\ndumb\ndune\nduring\ndust\ndutch\nduty\ndwarf\ndynamic\neager\neagle\nearly\nearn\nearth\neasily\neast\neasy\necho\necology\neconomy\nedge\nedit\neducate\neffort\negg\neight\neither\nelbow\nelder\nelectric\nelegant\nelement\nelephant\nelevator\nelite\nelse\nembark\nembody\nembrace\nemerge\nemotion\nemploy\nempower\nempty\nenable\nenact\nend\nendless\nendorse\nenemy\nenergy\nenforce\nengage\nengine\nenhance\nenjoy\nenlist\nenough\nenrich\nenroll\nensure\nenter\nentire\nentry\nenvelope\nepisode\nequal\nequip\nera\nerase\nerode\nerosion\nerror\nerupt\nescape\nessay\nessence\nestate\neternal\nethics\nevidence\nevil\nevoke\nevolve\nexact\nexample\nexcess\nexchange\nexcite\nexclude\nexcuse\nexecute\nexercise\nexhaust\nexhibit\nexile\nexist\nexit\nexotic\nexpand\nexpect\nexpire\nexplain\nexpose\nexpress\nextend\nextra\neye\neyebrow\nfabric\nface\nfaculty\nfade\nfaint\nfaith\nfall\nfalse\nfame\nfamily\nfamous\nfan\nfancy\nfantasy\nfarm\nfashion\nfat\nfatal\nfather\nfatigue\nfault\nfavorite\nfeature\nfebruary\nfederal\nfee\nfeed\nfeel\nfemale\nfence\nfestival\nfetch\nfever\nfew\nfiber\nfiction\nfield\nfigure\nfile\nfilm\nfilter\nfinal\nfind\nfine\nfinger\nfinish\nfire\nfirm\nfirst\nfiscal\nfish\nfit\nfitness\nfix\nflag\nflame\nflash\nflat\nflavor\nflee\nflight\nflip\nfloat\nflock\nfloor\nflower\nfluid\nflush\nfly\nfoam\nfocus\nfog\nfoil\nfold\nfollow\nfood\nfoot\nforce\nforest\nforget\nfork\nfortune\nforum\nforward\nfossil\nfoster\nfound\nfox\nfragile\nframe\nfrequent\nfresh\nfriend\nfringe\nfrog\nfront\nfrost\nfrown\nfrozen\nfruit\nfuel\nfun\nfunny\nfurnace\nfury\nfuture\ngadget\ngain\ngalaxy\ngallery\ngame\ngap\ngarage\ngarbage\ngarden\ngarlic\ngarment\ngas\ngasp\ngate\ngather\ngauge\ngaze\ngeneral\ngenius\ngenre\ngentle\ngenuine\ngesture\nghost\ngiant\ngift\ngiggle\nginger\ngiraffe\ngirl\ngive\nglad\nglance\nglare\nglass\nglide\nglimpse\nglobe\ngloom\nglory\nglove\nglow\nglue\ngoat\ngoddess\ngold\ngood\ngoose\ngorilla\ngospel\ngossip\ngovern\ngown\ngrab\ngrace\ngrain\ngrant\ngrape\ngrass\ngravity\ngreat\ngreen\ngrid\ngrief\ngrit\ngrocery\ngroup\ngrow\ngrunt\nguard\nguess\nguide\nguilt\nguitar\ngun\ngym\nhabit\nhair\nhalf\nhammer\nhamster\nhand\nhappy\nharbor\nhard\nharsh\nharvest\nhat\nhave\nhawk\nhazard\nhead\nhealth\nheart\nheavy\nhedgehog\nheight\nhello\nhelmet\nhelp\nhen\nhero\nhidden\nhigh\nhill\nhint\nhip\nhire\nhistory\nhobby\nhockey\nhold\nhole\nholiday\nhollow\nhome\nhoney\nhood\nhope\nhorn\nhorror\nhorse\nhospital\nhost\nhotel\nhour\nhover\nhub\nhuge\nhuman\nhumble\nhumor\nhundred\nhungry\nhunt\nhurdle\nhurry\nhurt\nhusband\nhybrid\nice\nicon\nidea\nidentify\nidle\nignore\nill\nillegal\nillness\nimage\nimitate\nimmense\nimmune\nimpact\nimpose\nimprove\nimpulse\ninch\ninclude\nincome\nincrease\nindex\nindicate\nindoor\nindustry\ninfant\ninflict\ninform\ninhale\ninherit\ninitial\ninject\ninjury\ninmate\ninner\ninnocent\ninput\ninquiry\ninsane\ninsect\ninside\ninspire\ninstall\nintact\ninterest\ninto\ninvest\ninvite\ninvolve\niron\nisland\nisolate\nissue\nitem\nivory\njacket\njaguar\njar\njazz\njealous\njeans\njelly\njewel\njob\njoin\njoke\njourney\njoy\njudge\njuice\njump\njungle\njunior\njunk\njust\nkangaroo\nkeen\nkeep\nketchup\nkey\nkick\nkid\nkidney\nkind\nkingdom\nkiss\nkit\nkitchen\nkite\nkitten\nkiwi\nknee\nknife\nknock\nknow\nlab\nlabel\nlabor\nladder\nlady\nlake\nlamp\nlanguage\nlaptop\nlarge\nlater\nlatin\nlaugh\nlaundry\nlava\nlaw\nlawn\nlawsuit\nlayer\nlazy\nleader\nleaf\nlearn\nleave\nlecture\nleft\nleg\nlegal\nlegend\nleisure\nlemon\nlend\nlength\nlens\nleopard\nlesson\nletter\nlevel\nliar\nliberty\nlibrary\nlicense\nlife\nlift\nlight\nlike\nlimb\nlimit\nlink\nlion\nliquid\nlist\nlittle\nlive\nlizard\nload\nloan\nlobster\nlocal\nlock\nlogic\nlonely\nlong\nloop\nlottery\nloud\nlounge\nlove\nloyal\nlucky\nluggage\nlumber\nlunar\nlunch\nluxury\nlyrics\nmachine\nmad\nmagic\nmagnet\nmaid\nmail\nmain\nmajor\nmake\nmammal\nman\nmanage\nmandate\nmango\nmansion\nmanual\nmaple\nmarble\nmarch\nmargin\nmarine\nmarket\nmarriage\nmask\nmass\nmaster\nmatch\nmaterial\nmath\nmatrix\nmatter\nmaximum\nmaze\nmeadow\nmean\nmeasure\nmeat\nmechanic\nmedal\nmedia\nmelody\nmelt\nmember\nmemory\nmention\nmenu\nmercy\nmerge\nmerit\nmerry\nmesh\nmessage\nmetal\nmethod\nmiddle\nmidnight\nmilk\nmillion\nmimic\nmind\nminimum\nminor\nminute\nmiracle\nmirror\nmisery\nmiss\nmistake\nmix\nmixed\nmixture\nmobile\nmodel\nmodify\nmom\nmoment\nmonitor\nmonkey\nmonster\nmonth\nmoon\nmoral\nmore\nmorning\nmosquito\nmother\nmotion\nmotor\nmountain\nmouse\nmove\nmovie\nmuch\nmuffin\nmule\nmultiply\nmuscle\nmuseum\nmushroom\nmusic\nmust\nmutual\nmyself\nmystery\nmyth\nnaive\nname\nnapkin\nnarrow\nnasty\nnation\nnature\nnear\nneck\nneed\nnegative\nneglect\nneither\nnephew\nnerve\nnest\nnet\nnetwork\nneutral\nnever\nnews\nnext\nnice\nnight\nnoble\nnoise\nnominee\nnoodle\nnormal\nnorth\nnose\nnotable\nnote\nnothing\nnotice\nnovel\nnow\nnuclear\nnumber\nnurse\nnut\noak\nobey\nobject\noblige\nobscure\nobserve\nobtain\nobvious\noccur\nocean\noctober\nodor\noff\noffer\noffice\noften\noil\nokay\nold\nolive\nolympic\nomit\nonce\none\nonion\nonline\nonly\nopen\nopera\nopinion\noppose\noption\norange\norbit\norchard\norder\nordinary\norgan\norient\noriginal\norphan\nostrich\nother\noutdoor\nouter\noutput\noutside\noval\noven\nover\nown\nowner\noxygen\noyster\nozone\npact\npaddle\npage\npair\npalace\npalm\npanda\npanel\npanic\npanther\npaper\nparade\nparent\npark\nparrot\nparty\npass\npatch\npath\npatient\npatrol\npattern\npause\npave\npayment\npeace\npeanut\npear\npeasant\npelican\npen\npenalty\npencil\npeople\npepper\nperfect\npermit\nperson\npet\nphone\nphoto\nphrase\nphysical\npiano\npicnic\npicture\npiece\npig\npigeon\npill\npilot\npink\npioneer\npipe\npistol\npitch\npizza\nplace\nplanet\nplastic\nplate\nplay\nplease\npledge\npluck\nplug\nplunge\npoem\npoet\npoint\npolar\npole\npolice\npond\npony\npool\npopular\nportion\nposition\npossible\npost\npotato\npottery\npoverty\npowder\npower\npractice\npraise\npredict\nprefer\nprepare\npresent\npretty\nprevent\nprice\npride\nprimary\nprint\npriority\nprison\nprivate\nprize\nproblem\nprocess\nproduce\nprofit\nprogram\nproject\npromote\nproof\nproperty\nprosper\nprotect\nproud\nprovide\npublic\npudding\npull\npulp\npulse\npumpkin\npunch\npupil\npuppy\npurchase\npurity\npurpose\npurse\npush\nput\npuzzle\npyramid\nquality\nquantum\nquarter\nquestion\nquick\nquit\nquiz\nquote\nrabbit\nraccoon\nrace\nrack\nradar\nradio\nrail\nrain\nraise\nrally\nramp\nranch\nrandom\nrange\nrapid\nrare\nrate\nrather\nraven\nraw\nrazor\nready\nreal\nreason\nrebel\nrebuild\nrecall\nreceive\nrecipe\nrecord\nrecycle\nreduce\nreflect\nreform\nrefuse\nregion\nregret\nregular\nreject\nrelax\nrelease\nrelief\nrely\nremain\nremember\nremind\nremove\nrender\nrenew\nrent\nreopen\nrepair\nrepeat\nreplace\nreport\nrequire\nrescue\nresemble\nresist\nresource\nresponse\nresult\nretire\nretreat\nreturn\nreunion\nreveal\nreview\nreward\nrhythm\nrib\nribbon\nrice\nrich\nride\nridge\nrifle\nright\nrigid\nring\nriot\nripple\nrisk\nritual\nrival\nriver\nroad\nroast\nrobot\nrobust\nrocket\nromance\nroof\nrookie\nroom\nrose\nrotate\nrough\nround\nroute\nroyal\nrubber\nrude\nrug\nrule\nrun\nrunway\nrural\nsad\nsaddle\nsadness\nsafe\nsail\nsalad\nsalmon\nsalon\nsalt\nsalute\nsame\nsample\nsand\nsatisfy\nsatoshi\nsauce\nsausage\nsave\nsay\nscale\nscan\nscare\nscatter\nscene\nscheme\nschool\nscience\nscissors\nscorpion\nscout\nscrap\nscreen\nscript\nscrub\nsea\nsearch\nseason\nseat\nsecond\nsecret\nsection\nsecurity\nseed\nseek\nsegment\nselect\nsell\nseminar\nsenior\nsense\nsentence\nseries\nservice\nsession\nsettle\nsetup\nseven\nshadow\nshaft\nshallow\nshare\nshed\nshell\nsheriff\nshield\nshift\nshine\nship\nshiver\nshock\nshoe\nshoot\nshop\nshort\nshoulder\nshove\nshrimp\nshrug\nshuffle\nshy\nsibling\nsick\nside\nsiege\nsight\nsign\nsilent\nsilk\nsilly\nsilver\nsimilar\nsimple\nsince\nsing\nsiren\nsister\nsituate\nsix\nsize\nskate\nsketch\nski\nskill\nskin\nskirt\nskull\nslab\nslam\nsleep\nslender\nslice\nslide\nslight\nslim\nslogan\nslot\nslow\nslush\nsmall\nsmart\nsmile\nsmoke\nsmooth\nsnack\nsnake\nsnap\nsniff\nsnow\nsoap\nsoccer\nsocial\nsock\nsoda\nsoft\nsolar\nsoldier\nsolid\nsolution\nsolve\nsomeone\nsong\nsoon\nsorry\nsort\nsoul\nsound\nsoup\nsource\nsouth\nspace\nspare\nspatial\nspawn\nspeak\nspecial\nspeed\nspell\nspend\nsphere\nspice\nspider\nspike\nspin\nspirit\nsplit\nspoil\nsponsor\nspoon\nsport\nspot\nspray\nspread\nspring\nspy\nsquare\nsqueeze\nsquirrel\nstable\nstadium\nstaff\nstage\nstairs\nstamp\nstand\nstart\nstate\nstay\nsteak\nsteel\nstem\nstep\nstereo\nstick\nstill\nsting\nstock\nstomach\nstone\nstool\nstory\nstove\nstrategy\nstreet\nstrike\nstrong\nstruggle\nstudent\nstuff\nstumble\nstyle\nsubject\nsubmit\nsubway\nsuccess\nsuch\nsudden\nsuffer\nsugar\nsuggest\nsuit\nsummer\nsun\nsunny\nsunset\nsuper\nsupply\nsupreme\nsure\nsurface\nsurge\nsurprise\nsurround\nsurvey\nsuspect\nsustain\nswallow\nswamp\nswap\nswarm\nswear\nsweet\nswift\nswim\nswing\nswitch\nsword\nsymbol\nsymptom\nsyrup\nsystem\ntable\ntackle\ntag\ntail\ntalent\ntalk\ntank\ntape\ntarget\ntask\ntaste\ntattoo\ntaxi\nteach\nteam\ntell\nten\ntenant\ntennis\ntent\nterm\ntest\ntext\nthank\nthat\ntheme\nthen\ntheory\nthere\nthey\nthing\nthis\nthought\nthree\nthrive\nthrow\nthumb\nthunder\nticket\ntide\ntiger\ntilt\ntimber\ntime\ntiny\ntip\ntired\ntissue\ntitle\ntoast\ntobacco\ntoday\ntoddler\ntoe\ntogether\ntoilet\ntoken\ntomato\ntomorrow\ntone\ntongue\ntonight\ntool\ntooth\ntop\ntopic\ntopple\ntorch\ntornado\ntortoise\ntoss\ntotal\ntourist\ntoward\ntower\ntown\ntoy\ntrack\ntrade\ntraffic\ntragic\ntrain\ntransfer\ntrap\ntrash\ntravel\ntray\ntreat\ntree\ntrend\ntrial\ntribe\ntrick\ntrigger\ntrim\ntrip\ntrophy\ntrouble\ntruck\ntrue\ntruly\ntrumpet\ntrust\ntruth\ntry\ntube\ntuition\ntumble\ntuna\ntunnel\nturkey\nturn\nturtle\ntwelve\ntwenty\ntwice\ntwin\ntwist\ntwo\ntype\ntypical\nugly\numbrella\nunable\nunaware\nuncle\nuncover\nunder\nundo\nunfair\nunfold\nunhappy\nuniform\nunique\nunit\nuniverse\nunknown\nunlock\nuntil\nunusual\nunveil\nupdate\nupgrade\nuphold\nupon\nupper\nupset\nurban\nurge\nusage\nuse\nused\nuseful\nuseless\nusual\nutility\nvacant\nvacuum\nvague\nvalid\nvalley\nvalve\nvan\nvanish\nvapor\nvarious\nvast\nvault\nvehicle\nvelvet\nvendor\nventure\nvenue\nverb\nverify\nversion\nvery\nvessel\nveteran\nviable\nvibrant\nvicious\nvictory\nvideo\nview\nvillage\nvintage\nviolin\nvirtual\nvirus\nvisa\nvisit\nvisual\nvital\nvivid\nvocal\nvoice\nvoid\nvolcano\nvolume\nvote\nvoyage\nwage\nwagon\nwait\nwalk\nwall\nwalnut\nwant\nwarfare\nwarm\nwarrior\nwash\nwasp\nwaste\nwater\nwave\nway\nwealth\nweapon\nwear\nweasel\nweather\nweb\nwedding\nweekend\nweird\nwelcome\nwest\nwet\nwhale\nwhat\nwheat\nwheel\nwhen\nwhere\nwhip\nwhisper\nwide\nwidth\nwife\nwild\nwill\nwin\nwindow\nwine\nwing\nwink\nwinner\nwinter\nwire\nwisdom\nwise\nwish\nwitness\nwolf\nwoman\nwonder\nwood\nwool\nword\nwork\nworld\nworry\nworth\nwrap\nwreck\nwrestle\nwrist\nwrite\nwrong\nyard\nyear\nyellow\nyou\nyoung\nyouth\nzebra\nzero\nzone\nzoo".split("\n")},422:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.wNAF=function(e,t){return{constTimeNegate:a,hasPrecomputes:e=>1!==p(e),unsafeLadder(t,n,r=e.ZERO){let o=t;for(;n>i;)n&s&&(r=r.add(o)),o=o.double(),n>>=s;return r},precomputeWindow(e,n){const{windows:r,windowSize:o}=u(n,t),i=[];let s=e,a=s;for(let e=0;e<r;e++){a=s,i.push(a);for(let e=1;e<o;e++)a=a.add(s),i.push(a);s=a.double()}return i},wNAF(n,r,o){const{windows:i,windowSize:c}=u(n,t);let f=e.ZERO,l=e.BASE;const h=BigInt(2**n-1),d=2**n,p=BigInt(n);for(let e=0;e<i;e++){const t=e*c;let n=Number(o&h);o>>=p,n>c&&(n-=d,o+=s);const i=t,u=t+Math.abs(n)-1,y=e%2!=0,g=n<0;0===n?l=l.add(a(y,r[i])):f=f.add(a(g,r[u]))}return{p:f,f:l}},wNAFUnsafe(n,r,o,a=e.ZERO){const{windows:c,windowSize:f}=u(n,t),l=BigInt(2**n-1),h=2**n,d=BigInt(n);for(let e=0;e<c;e++){const t=e*f;if(o===i)break;let n=Number(o&l);if(o>>=d,n>f&&(n-=h,o+=s),0===n)continue;let c=r[t+Math.abs(n)-1];n<0&&(c=c.negate()),a=a.add(c)}return a},getPrecomputes(e,t,n){let r=h.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&h.set(t,n(r))),r},wNAFCached(e,t,n){const r=p(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){const o=p(e);return 1===o?this.unsafeLadder(e,t,r):this.wNAFUnsafe(o,this.getPrecomputes(o,e,n),t,r)},setWindowSize(e,n){c(n,t),d.set(e,n),h.delete(e)}}},t.pippenger=function(e,t,n,r){if(f(n,e),l(r,t),n.length!==r.length)throw new Error("arrays of points and scalars must have equal length");const i=e.ZERO,s=(0,o.bitLen)(BigInt(n.length)),a=s>12?s-3:s>4?s-2:s?2:1,c=(1<<a)-1,u=new Array(c+1).fill(i);let h=i;for(let e=Math.floor((t.BITS-1)/a)*a;e>=0;e-=a){u.fill(i);for(let t=0;t<r.length;t++){const o=r[t],i=Number(o>>BigInt(e)&BigInt(c));u[i]=u[i].add(n[t])}let t=i;for(let e=u.length-1,n=i;e>0;e--)n=n.add(u[e]),t=t.add(n);if(h=h.add(t),0!==e)for(let e=0;e<a;e++)h=h.double()}return h},t.precomputeMSMUnsafe=function(e,t,n,r){c(r,t.BITS),f(n,e);const o=e.ZERO,i=2**r-1,s=Math.ceil(t.BITS/r),a=BigInt((1<<r)-1),u=n.map((e=>{const t=[];for(let n=0,r=e;n<i;n++)t.push(r),r=r.add(e);return t}));return e=>{if(l(e,t),e.length>n.length)throw new Error("array of scalars must be smaller than array of points");let i=o;for(let t=0;t<s;t++){if(i!==o)for(let e=0;e<r;e++)i=i.double();const n=BigInt(s*r-(t+1)*r);for(let t=0;t<e.length;t++){const r=e[t],o=Number(r>>n&a);o&&(i=i.add(u[t][o-1]))}}return i}},t.validateBasic=function(e){return(0,r.validateField)(e.Fp),(0,o.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,r.nLength)(e.n,e.nBitLength),...e,p:e.Fp.ORDER})};const r=n(967),o=n(484),i=BigInt(0),s=BigInt(1);function a(e,t){const n=t.negate();return e?n:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw new Error("invalid window size, expected [1.."+t+"], got W="+e)}function u(e,t){return c(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function f(e,t){if(!Array.isArray(e))throw new Error("array expected");e.forEach(((e,n)=>{if(!(e instanceof t))throw new Error("invalid point at index "+n)}))}function l(e,t){if(!Array.isArray(e))throw new Error("array of scalars expected");e.forEach(((e,n)=>{if(!t.isValid(e))throw new Error("invalid scalar at index "+n)}))}const h=new WeakMap,d=new WeakMap;function p(e){return d.get(e)||1}},427:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.verifyDLEQProof_reblind=t.verifyDLEQProof=void 0;const r=n(849),o=n(484),i=n(510),s=n(629);t.verifyDLEQProof=(e,t,n,a)=>{const c=i.secp256k1.ProjectivePoint.fromPrivateKey((0,o.bytesToHex)(e.s)),u=a.multiply((0,s.bytesToNumber)(e.e)),f=t.multiply((0,s.bytesToNumber)(e.s)),l=n.multiply((0,s.bytesToNumber)(e.e)),h=c.subtract(u),d=f.subtract(l);return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}((0,r.hash_e)([h,d,a,n]),e.e)},t.verifyDLEQProof_reblind=(e,n,o,s)=>{if(void 0===n.r)throw new Error("verifyDLEQProof_reblind: Undefined blinding factor");const a=(0,r.hashToCurve)(e),c=o.add(s.multiply(n.r)),u=i.secp256k1.ProjectivePoint.fromPrivateKey(n.r),f=a.add(u);return(0,t.verifyDLEQProof)(n,f,c,s)}},484:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.notImplemented=t.bitMask=void 0,t.isBytes=i,t.abytes=s,t.abool=function(e,t){if("boolean"!=typeof t)throw new Error(e+" boolean expected, got "+t)},t.bytesToHex=c,t.numberToHexUnpadded=u,t.hexToNumber=f,t.hexToBytes=d,t.bytesToNumberBE=function(e){return f(c(e))},t.bytesToNumberLE=function(e){return s(e),f(c(Uint8Array.from(e).reverse()))},t.numberToBytesBE=p,t.numberToBytesLE=function(e,t){return p(e,t).reverse()},t.numberToVarBytesBE=function(e){return d(u(e))},t.ensureBytes=function(e,t,n){let r;if("string"==typeof t)try{r=d(t)}catch(t){throw new Error(e+" must be hex string or Uint8Array, cause: "+t)}else{if(!i(t))throw new Error(e+" must be hex string or Uint8Array");r=Uint8Array.from(t)}const o=r.length;if("number"==typeof n&&o!==n)throw new Error(e+" of length "+n+" expected, got "+o);return r},t.concatBytes=y,t.equalBytes=function(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n},t.utf8ToBytes=function(e){if("string"!=typeof e)throw new Error("string expected");return new Uint8Array((new TextEncoder).encode(e))},t.inRange=m,t.aInRange=function(e,t,n,r){if(!m(t,n,r))throw new Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)},t.bitLen=function(e){let t;for(t=0;e>n;e>>=r,t+=1);return t},t.bitGet=function(e,t){return e>>BigInt(t)&r},t.bitSet=function(e,t,o){return e|(o?r:n)<<BigInt(t)},t.createHmacDrbg=function(e,t,n){if("number"!=typeof e||e<2)throw new Error("hashLen must be a number");if("number"!=typeof t||t<2)throw new Error("qByteLen must be a number");if("function"!=typeof n)throw new Error("hmacFn must be a function");let r=w(e),o=w(e),i=0;const s=()=>{r.fill(1),o.fill(0),i=0},a=(...e)=>n(o,r,...e),c=(e=w())=>{o=a(b([0]),e),r=a(),0!==e.length&&(o=a(b([1]),e),r=a())},u=()=>{if(i++>=1e3)throw new Error("drbg: tried 1000 values");let e=0;const n=[];for(;e<t;){r=a();const t=r.slice();n.push(t),e+=r.length}return y(...n)};return(e,t)=>{let n;for(s(),c(e);!(n=t(u()));)c();return s(),n}},t.validateObject=function(e,t,n={}){const r=(t,n,r)=>{const o=v[n];if("function"!=typeof o)throw new Error("invalid validator function");const i=e[t];if(!(r&&void 0===i||o(i,e)))throw new Error("param "+String(t)+" is invalid. Expected "+n+", got "+i)};for(const[e,n]of Object.entries(t))r(e,n,!1);for(const[e,t]of Object.entries(n))r(e,t,!0);return e},t.memoized=function(e){const t=new WeakMap;return(n,...r)=>{const o=t.get(n);if(void 0!==o)return o;const i=e(n,...r);return t.set(n,i),i}};const n=BigInt(0),r=BigInt(1),o=BigInt(2);function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!i(e))throw new Error("Uint8Array expected")}const a=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function c(e){s(e);let t="";for(let n=0;n<e.length;n++)t+=a[e[n]];return t}function u(e){const t=e.toString(16);return 1&t.length?"0"+t:t}function f(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}const l={_0:48,_9:57,A:65,F:70,a:97,f:102};function h(e){return e>=l._0&&e<=l._9?e-l._0:e>=l.A&&e<=l.F?e-(l.A-10):e>=l.a&&e<=l.f?e-(l.a-10):void 0}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,o=0;t<n;t++,o+=2){const n=h(e.charCodeAt(o)),i=h(e.charCodeAt(o+1));if(void 0===n||void 0===i){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[t]=16*n+i}return r}function p(e,t){return d(e.toString(16).padStart(2*t,"0"))}function y(...e){let t=0;for(let n=0;n<e.length;n++){const r=e[n];s(r),t+=r.length}const n=new Uint8Array(t);for(let t=0,r=0;t<e.length;t++){const o=e[t];n.set(o,r),r+=o.length}return n}const g=e=>"bigint"==typeof e&&n<=e;function m(e,t,n){return g(e)&&g(t)&&g(n)&&t<=e&&e<n}t.bitMask=e=>(o<<BigInt(e-1))-r;const w=e=>new Uint8Array(e),b=e=>Uint8Array.from(e),v={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||i(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};t.notImplemented=()=>{throw new Error("not implemented")}},510:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeToCurve=t.hashToCurve=t.schnorr=t.secp256k1=void 0;const r=n(623),o=n(175),i=n(562),s=n(761),a=n(967),c=n(484),u=n(705),f=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),l=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),d=BigInt(2),p=(e,t)=>(e+t/d)/t;function y(e){const t=f,n=BigInt(3),r=BigInt(6),o=BigInt(11),i=BigInt(22),s=BigInt(23),c=BigInt(44),u=BigInt(88),l=e*e*e%t,h=l*l*e%t,p=(0,a.pow2)(h,n,t)*h%t,y=(0,a.pow2)(p,n,t)*h%t,m=(0,a.pow2)(y,d,t)*l%t,w=(0,a.pow2)(m,o,t)*m%t,b=(0,a.pow2)(w,i,t)*w%t,v=(0,a.pow2)(b,c,t)*b%t,E=(0,a.pow2)(v,u,t)*v%t,B=(0,a.pow2)(E,c,t)*b%t,x=(0,a.pow2)(B,n,t)*h%t,k=(0,a.pow2)(x,s,t)*w%t,A=(0,a.pow2)(k,r,t)*l%t,S=(0,a.pow2)(A,d,t);if(!g.eql(g.sqr(S),e))throw new Error("Cannot find square root");return S}const g=(0,a.Field)(f,void 0,void 0,{sqrt:y});t.secp256k1=(0,i.createCurve)({a:BigInt(0),b:BigInt(7),Fp:g,n:l,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{const t=l,n=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),o=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),i=n,s=BigInt("0x100000000000000000000000000000000"),c=p(i*e,t),u=p(-r*e,t);let f=(0,a.mod)(e-c*n-u*o,t),d=(0,a.mod)(-c*r-u*i,t);const y=f>s,g=d>s;if(y&&(f=t-f),g&&(d=t-d),f>s||d>s)throw new Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:y,k1:f,k2neg:g,k2:d}}}},r.sha256);const m=BigInt(0),w={};function b(e,...t){let n=w[e];if(void 0===n){const t=(0,r.sha256)(Uint8Array.from(e,(e=>e.charCodeAt(0))));n=(0,c.concatBytes)(t,t),w[e]=n}return(0,r.sha256)((0,c.concatBytes)(n,...t))}const v=e=>e.toRawBytes(!0).slice(1),E=e=>(0,c.numberToBytesBE)(e,32),B=e=>(0,a.mod)(e,f),x=e=>(0,a.mod)(e,l),k=t.secp256k1.ProjectivePoint;function A(e){let n=t.secp256k1.utils.normPrivateKeyToScalar(e),r=k.fromPrivateKey(n);return{scalar:r.hasEvenY()?n:x(-n),bytes:v(r)}}function S(e){(0,c.aInRange)("x",e,h,f);const t=B(e*e);let n=y(B(t*e+BigInt(7)));n%d!==m&&(n=B(-n));const r=new k(e,n,h);return r.assertValidity(),r}const I=c.bytesToNumberBE;function _(...e){return x(I(b("BIP0340/challenge",...e)))}function T(e,t,n){const r=(0,c.ensureBytes)("signature",e,64),o=(0,c.ensureBytes)("message",t),i=(0,c.ensureBytes)("publicKey",n,32);try{const e=S(I(i)),t=I(r.subarray(0,32));if(!(0,c.inRange)(t,h,f))return!1;const n=I(r.subarray(32,64));if(!(0,c.inRange)(n,h,l))return!1;const d=_(E(t),v(e),o),p=(s=e,a=n,u=x(-d),k.BASE.multiplyAndAddUnsafe(s,a,u));return!(!p||!p.hasEvenY()||p.toAffine().x!==t)}catch(e){return!1}var s,a,u}t.schnorr={getPublicKey:function(e){return A(e).bytes},sign:function(e,t,n=(0,o.randomBytes)(32)){const r=(0,c.ensureBytes)("message",e),{bytes:i,scalar:s}=A(t),a=(0,c.ensureBytes)("auxRand",n,32),u=E(s^I(b("BIP0340/aux",a))),f=b("BIP0340/nonce",u,i,r),l=x(I(f));if(l===m)throw new Error("sign failed: k is zero");const{bytes:h,scalar:d}=A(l),p=_(h,i,r),y=new Uint8Array(64);if(y.set(h,0),y.set(E(x(d+p*s)),32),!T(y,r,i))throw new Error("sign: Invalid signature produced");return y},verify:T,utils:{randomPrivateKey:t.secp256k1.utils.randomPrivateKey,lift_x:S,pointToBytes:v,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:b,mod:a.mod}};const U=(()=>(0,s.isogenyMap)(g,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map((e=>e.map((e=>BigInt(e)))))))(),P=(()=>(0,u.mapToCurveSimpleSWU)(g,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:g.create(BigInt("-11"))}))(),O=(()=>(0,s.createHasher)(t.secp256k1.ProjectivePoint,(e=>{const{x:t,y:n}=P(g.create(e[0]));return U(t,n)}),{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:g.ORDER,m:1,k:128,expand:"xmd",hash:r.sha256}))();t.hashToCurve=O.hashToCurve,t.encodeToCurve=O.encodeToCurve},526:(e,t)=>{"use strict";t.byteLength=function(e){var t=a(e),n=t[0],r=t[1];return 3*(n+r)/4-r},t.toByteArray=function(e){var t,n,i=a(e),s=i[0],c=i[1],u=new o(function(e,t,n){return 3*(t+n)/4-n}(0,s,c)),f=0,l=c>0?s-4:s;for(n=0;n<l;n+=4)t=r[e.charCodeAt(n)]<<18|r[e.charCodeAt(n+1)]<<12|r[e.charCodeAt(n+2)]<<6|r[e.charCodeAt(n+3)],u[f++]=t>>16&255,u[f++]=t>>8&255,u[f++]=255&t;return 2===c&&(t=r[e.charCodeAt(n)]<<2|r[e.charCodeAt(n+1)]>>4,u[f++]=255&t),1===c&&(t=r[e.charCodeAt(n)]<<10|r[e.charCodeAt(n+1)]<<4|r[e.charCodeAt(n+2)]>>2,u[f++]=t>>8&255,u[f++]=255&t),u},t.fromByteArray=function(e){for(var t,r=e.length,o=r%3,i=[],s=16383,a=0,u=r-o;a<u;a+=s)i.push(c(e,a,a+s>u?u:a+s));return 1===o?(t=e[r-1],i.push(n[t>>2]+n[t<<4&63]+"==")):2===o&&(t=(e[r-2]<<8)+e[r-1],i.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"=")),i.join("")};for(var n=[],r=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0;s<64;++s)n[s]=i[s],r[i.charCodeAt(s)]=s;function a(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function c(e,t,r){for(var o,i,s=[],a=t;a<r;a+=3)o=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),s.push(n[(i=o)>>18&63]+n[i>>12&63]+n[i>>6&63]+n[63&i]);return s.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},527:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveSeedFromMnemonic=t.generateNewMnemonic=t.deriveBlindingFactor=t.deriveSecret=void 0;const r=n(168),o=n(849),i=n(341),s=n(375);var a;!function(e){e[e.SECRET=0]="SECRET",e[e.BLINDING_FACTOR=1]="BLINDING_FACTOR"}(a||(a={})),t.deriveSecret=(e,t,n)=>c(e,t,n,a.SECRET),t.deriveBlindingFactor=(e,t,n)=>c(e,t,n,a.BLINDING_FACTOR);const c=(e,t,n,i)=>{const s=r.HDKey.fromMasterSeed(e),a=`m/129372'/0'/${(0,o.getKeysetIdInt)(t)}'/${n}'/${i}`,c=s.derive(a);if(null===c.privateKey)throw new Error("Could not derive private key");return c.privateKey};t.generateNewMnemonic=()=>(0,i.generateMnemonic)(s.wordlist,128),t.deriveSeedFromMnemonic=e=>(0,i.mnemonicToSeedSync)(e)},557:(e,t)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw new Error("positive integer expected, got "+e)}function r(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}Object.defineProperty(t,"__esModule",{value:!0}),t.anumber=n,t.abytes=r,t.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw new Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)},t.aexists=function(e,t=!0){if(e.destroyed)throw new Error("Hash instance has been destroyed");if(t&&e.finished)throw new Error("Hash#digest() has already been called")},t.aoutput=function(e,t){r(e);const n=t.outputLen;if(e.length<n)throw new Error("digestInto() expects output buffer of length at least "+n)}},562:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getHash=s,t.createCurve=function(e,t){const n=t=>(0,i.weierstrass)({...e,...s(t)});return{...n(t),create:n}};const r=n(615),o=n(175),i=n(705);function s(e){return{hash:e,hmac:(t,...n)=>(0,r.hmac)(e,t,(0,o.concatBytes)(...n)),randomBytes:o.randomBytes}}},615:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hmac=t.HMAC=void 0;const r=n(557),o=n(175);class i extends o.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,r.ahash)(e);const n=(0,o.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw new Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;const i=this.blockLen,s=new Uint8Array(i);s.set(n.length>i?e.create().update(n).digest():n);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,r.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,r.aexists)(this),(0,r.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){const e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));const{oHash:t,iHash:n,finished:r,destroyed:o,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=o,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}t.HMAC=i,t.hmac=(e,t,n)=>new i(e,t).update(n).digest(),t.hmac.create=(e,t)=>new i(e,t)},623:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sha224=t.sha256=t.SHA256=void 0;const r=n(202),o=n(175),i=new Uint32Array([1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298]),s=new Uint32Array([1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225]),a=new Uint32Array(64);class c extends r.HashMD{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){const{A:e,B:t,C:n,D:r,E:o,F:i,G:s,H:a}=this;return[e,t,n,r,o,i,s,a]}set(e,t,n,r,o,i,s,a){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|o,this.F=0|i,this.G=0|s,this.H=0|a}process(e,t){for(let n=0;n<16;n++,t+=4)a[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){const t=a[e-15],n=a[e-2],r=(0,o.rotr)(t,7)^(0,o.rotr)(t,18)^t>>>3,i=(0,o.rotr)(n,17)^(0,o.rotr)(n,19)^n>>>10;a[e]=i+a[e-7]+r+a[e-16]|0}let{A:n,B:s,C:c,D:u,E:f,F:l,G:h,H:d}=this;for(let e=0;e<64;e++){const t=d+((0,o.rotr)(f,6)^(0,o.rotr)(f,11)^(0,o.rotr)(f,25))+(0,r.Chi)(f,l,h)+i[e]+a[e]|0,p=((0,o.rotr)(n,2)^(0,o.rotr)(n,13)^(0,o.rotr)(n,22))+(0,r.Maj)(n,s,c)|0;d=h,h=l,l=f,f=u+t|0,u=c,c=s,s=n,n=t+p|0}n=n+this.A|0,s=s+this.B|0,c=c+this.C|0,u=u+this.D|0,f=f+this.E|0,l=l+this.F|0,h=h+this.G|0,d=d+this.H|0,this.set(n,s,c,u,f,l,h,d)}roundClean(){a.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}t.SHA256=c;class u extends c{constructor(){super(),this.A=-1056596264,this.B=914150663,this.C=812702999,this.D=-150054599,this.E=-4191439,this.F=1750603025,this.G=1694076839,this.H=-1090891868,this.outputLen=28}}t.sha256=(0,o.wrapConstructor)((()=>new c)),t.sha224=(0,o.wrapConstructor)((()=>new u))},629:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.encodeBase64toUint8=t.hexToNumber=t.bytesToNumber=void 0;const r=n(484),o=n(287);function i(e){return BigInt(`0x${e}`)}t.bytesToNumber=function(e){return i((0,r.bytesToHex)(e))},t.hexToNumber=i,t.encodeBase64toUint8=function(e){return o.Buffer.from(e,"base64")}},705:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DER=t.DERErr=void 0,t.weierstrassPoints=g,t.weierstrass=function(e){const n=function(e){const t=(0,r.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:c,n:u}=n,f=c.BYTES+1,d=2*c.BYTES+1;function p(e){return(0,o.mod)(e,u)}function y(e){return(0,o.invert)(e,u)}const{ProjectivePoint:m,normPrivateKeyToScalar:w,weierstrassEquation:b,isWithinCurveOrder:v}=g({...n,toBytes(e,t,n){const r=t.toAffine(),o=c.toBytes(r.x),a=i.concatBytes;return(0,s.abool)("isCompressed",n),n?a(Uint8Array.from([t.hasEvenY()?2:3]),o):a(Uint8Array.from([4]),o,c.toBytes(r.y))},fromBytes(e){const t=e.length,n=e[0],r=e.subarray(1);if(t!==f||2!==n&&3!==n){if(t===d&&4===n)return{x:c.fromBytes(r.subarray(0,c.BYTES)),y:c.fromBytes(r.subarray(c.BYTES,2*c.BYTES))};throw new Error("invalid Point, expected length of "+f+", or uncompressed "+d+", got "+t)}{const e=i.bytesToNumberBE(r);if(!i.inRange(e,h,c.ORDER))throw new Error("Point is not on curve");const t=b(e);let o;try{o=c.sqrt(t)}catch(e){const t=e instanceof Error?": "+e.message:"";throw new Error("Point is not on curve"+t)}return!(1&~n)!=((o&h)===h)&&(o=c.neg(o)),{x:e,y:o}}}}),E=e=>i.bytesToHex(i.numberToBytesBE(e,n.nByteLength));function B(e){return e>u>>h}const x=(e,t,n)=>i.bytesToNumberBE(e.slice(t,n));class k{constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}static fromCompact(e){const t=n.nByteLength;return e=(0,s.ensureBytes)("compactSignature",e,2*t),new k(x(e,0,t),x(e,t,2*t))}static fromDER(e){const{r:n,s:r}=t.DER.toSig((0,s.ensureBytes)("DER",e));return new k(n,r)}assertValidity(){i.aInRange("r",this.r,h,u),i.aInRange("s",this.s,h,u)}addRecoveryBit(e){return new k(this.r,this.s,e)}recoverPublicKey(e){const{r:t,s:r,recovery:o}=this,i=_((0,s.ensureBytes)("msgHash",e));if(null==o||![0,1,2,3].includes(o))throw new Error("recovery id invalid");const a=2===o||3===o?t+n.n:t;if(a>=c.ORDER)throw new Error("recovery id 2 or 3 invalid");const u=1&o?"03":"02",f=m.fromHex(u+E(a)),l=y(a),h=p(-i*l),d=p(r*l),g=m.BASE.multiplyAndAddUnsafe(f,h,d);if(!g)throw new Error("point at infinify");return g.assertValidity(),g}hasHighS(){return B(this.s)}normalizeS(){return this.hasHighS()?new k(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return t.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}const A={isValidPrivateKey(e){try{return w(e),!0}catch(e){return!1}},normPrivateKeyToScalar:w,randomPrivateKey:()=>{const e=(0,o.getMinHashLength)(n.n);return(0,o.mapHashToField)(n.randomBytes(e),n.n)},precompute:(e=8,t=m.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)};function S(e){const t=i.isBytes(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===f||r===d:n?r===2*f||r===2*d:e instanceof m}const I=n.bits2int||function(e){if(e.length>8192)throw new Error("input is too large");const t=i.bytesToNumberBE(e),r=8*e.length-n.nBitLength;return r>0?t>>BigInt(r):t},_=n.bits2int_modN||function(e){return p(I(e))},T=i.bitMask(n.nBitLength);function U(e){return i.aInRange("num < 2^"+n.nBitLength,e,l,T),i.numberToBytesBE(e,n.nByteLength)}const P={lowS:n.lowS,prehash:!1},O={lowS:n.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:n,getPublicKey:function(e,t=!0){return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,n=!0){if(S(e))throw new Error("first arg must be private key");if(!S(t))throw new Error("second arg must be public key");return m.fromHex(t).multiply(w(e)).toRawBytes(n)},sign:function(e,t,r=P){const{seed:o,k2sig:u}=function(e,t,r=P){if(["recovered","canonical"].some((e=>e in r)))throw new Error("sign() legacy options not supported");const{hash:o,randomBytes:u}=n;let{lowS:f,prehash:d,extraEntropy:g}=r;null==f&&(f=!0),e=(0,s.ensureBytes)("msgHash",e),a(r),d&&(e=(0,s.ensureBytes)("prehashed msgHash",o(e)));const b=_(e),E=w(t),x=[U(E),U(b)];if(null!=g&&!1!==g){const e=!0===g?u(c.BYTES):g;x.push((0,s.ensureBytes)("extraEntropy",e))}const A=i.concatBytes(...x),S=b;return{seed:A,k2sig:function(e){const t=I(e);if(!v(t))return;const n=y(t),r=m.BASE.multiply(t).toAffine(),o=p(r.x);if(o===l)return;const i=p(n*p(S+o*E));if(i===l)return;let s=(r.x===o?0:2)|Number(r.y&h),a=i;return f&&B(i)&&(a=function(e){return B(e)?p(-e):e}(i),s^=1),new k(o,a,s)}}}(e,t,r),f=n;return i.createHmacDrbg(f.hash.outputLen,f.nByteLength,f.hmac)(o,u)},verify:function(e,r,o,c=O){const u=e;r=(0,s.ensureBytes)("msgHash",r),o=(0,s.ensureBytes)("publicKey",o);const{lowS:f,prehash:l,format:h}=c;if(a(c),"strict"in c)throw new Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw new Error("format must be compact or der");const d="string"==typeof u||i.isBytes(u),g=!d&&!h&&"object"==typeof u&&null!==u&&"bigint"==typeof u.r&&"bigint"==typeof u.s;if(!d&&!g)throw new Error("invalid signature, expected Uint8Array, hex string or Signature instance");let w,b;try{if(g&&(w=new k(u.r,u.s)),d){try{"compact"!==h&&(w=k.fromDER(u))}catch(e){if(!(e instanceof t.DER.Err))throw e}w||"der"===h||(w=k.fromCompact(u))}b=m.fromHex(o)}catch(e){return!1}if(!w)return!1;if(f&&w.hasHighS())return!1;l&&(r=n.hash(r));const{r:v,s:E}=w,B=_(r),x=y(E),A=p(B*x),S=p(v*x),I=m.BASE.multiplyAndAddUnsafe(b,A,S)?.toAffine();return!!I&&p(I.x)===v},ProjectivePoint:m,Signature:k,utils:A}},t.SWUFpSqrtRatio=m,t.mapToCurveSimpleSWU=function(e,t){if((0,o.validateField)(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw new Error("mapToCurveSimpleSWU: invalid opts");const n=m(e,t.Z);if(!e.isOdd)throw new Error("Fp.isOdd is not implemented!");return r=>{let o,i,s,a,c,u,f,l;o=e.sqr(r),o=e.mul(o,t.Z),i=e.sqr(o),i=e.add(i,o),s=e.add(i,e.ONE),s=e.mul(s,t.B),a=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),a=e.mul(a,t.A),i=e.sqr(s),u=e.sqr(a),c=e.mul(u,t.A),i=e.add(i,c),i=e.mul(i,s),u=e.mul(u,a),c=e.mul(u,t.B),i=e.add(i,c),f=e.mul(o,s);const{isValid:h,value:d}=n(i,u);l=e.mul(o,r),l=e.mul(l,d),f=e.cmov(f,s,h),l=e.cmov(l,d,h);const p=e.isOdd(r)===e.isOdd(l);return l=e.cmov(e.neg(l),l,p),f=e.div(f,a),{x:f,y:l}}};const r=n(422),o=n(967),i=n(484),s=n(484);function a(e){void 0!==e.lowS&&(0,s.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,s.abool)("prehash",e.prehash)}const{bytesToNumberBE:c,hexToBytes:u}=i;class f extends Error{constructor(e=""){super(e)}}t.DERErr=f,t.DER={Err:f,_tlv:{encode:(e,n)=>{const{Err:r}=t.DER;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&n.length)throw new r("tlv.encode: unpadded data");const o=n.length/2,s=i.numberToHexUnpadded(o);if(s.length/2&128)throw new r("tlv.encode: long form length too big");const a=o>127?i.numberToHexUnpadded(s.length/2|128):"";return i.numberToHexUnpadded(e)+a+s+n},decode(e,n){const{Err:r}=t.DER;let o=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(n.length<2||n[o++]!==e)throw new r("tlv.decode: wrong tlv");const i=n[o++];let s=0;if(128&i){const e=127&i;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");const t=n.subarray(o,o+e);if(t.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===t[0])throw new r("tlv.decode(long): zero leftmost byte");for(const e of t)s=s<<8|e;if(o+=e,s<128)throw new r("tlv.decode(long): not minimal encoding")}else s=i;const a=n.subarray(o,o+s);if(a.length!==s)throw new r("tlv.decode: wrong value length");return{v:a,l:n.subarray(o+s)}}},_int:{encode(e){const{Err:n}=t.DER;if(e<l)throw new n("integer: negative integers are not allowed");let r=i.numberToHexUnpadded(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new n("unexpected DER parsing assertion: unpadded hex");return r},decode(e){const{Err:n}=t.DER;if(128&e[0])throw new n("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new n("invalid signature integer: unnecessary leading zero");return c(e)}},toSig(e){const{Err:n,_int:r,_tlv:o}=t.DER,s="string"==typeof e?u(e):e;i.abytes(s);const{v:a,l:c}=o.decode(48,s);if(c.length)throw new n("invalid signature: left bytes after parsing");const{v:f,l}=o.decode(2,a),{v:h,l:d}=o.decode(2,l);if(d.length)throw new n("invalid signature: left bytes after parsing");return{r:r.decode(f),s:r.decode(h)}},hexFromSig(e){const{_tlv:n,_int:r}=t.DER,o=n.encode(2,r.encode(e.r))+n.encode(2,r.encode(e.s));return n.encode(48,o)}};const l=BigInt(0),h=BigInt(1),d=BigInt(2),p=BigInt(3),y=BigInt(4);function g(e){const t=function(e){const t=(0,r.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});const{endo:n,Fp:o,a:s}=t;if(n){if(!o.eql(s,o.ZERO))throw new Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw new Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=t,a=(0,o.Field)(t.n,t.nBitLength),c=t.toBytes||((e,t,r)=>{const o=t.toAffine();return i.concatBytes(Uint8Array.from([4]),n.toBytes(o.x),n.toBytes(o.y))}),u=t.fromBytes||(e=>{const t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function f(e){const{a:r,b:o}=t,i=n.sqr(e),s=n.mul(i,e);return n.add(n.add(s,n.mul(e,r)),o)}if(!n.eql(n.sqr(t.Gy),f(t.Gx)))throw new Error("bad generator point: equation left != right");function d(e){const{allowedPrivateKeyLengths:n,nByteLength:r,wrapPrivateKey:a,n:c}=t;if(n&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw new Error("invalid private key");e=e.padStart(2*r,"0")}let u;try{u="bigint"==typeof e?e:i.bytesToNumberBE((0,s.ensureBytes)("private key",e,r))}catch(t){throw new Error("invalid private key, expected hex or "+r+" bytes, got "+typeof e)}return a&&(u=(0,o.mod)(u,c)),i.aInRange("private key",u,h,c),u}function y(e){if(!(e instanceof w))throw new Error("ProjectivePoint expected")}const g=(0,s.memoized)(((e,t)=>{const{px:r,py:o,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:o};const s=e.is0();null==t&&(t=s?n.ONE:n.inv(i));const a=n.mul(r,t),c=n.mul(o,t),u=n.mul(i,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(u,n.ONE))throw new Error("invZ was invalid");return{x:a,y:c}})),m=(0,s.memoized)((e=>{if(e.is0()){if(t.allowInfinityPoint&&!n.is0(e.py))return;throw new Error("bad point: ZERO")}const{x:r,y:o}=e.toAffine();if(!n.isValid(r)||!n.isValid(o))throw new Error("bad point: x or y not FE");const i=n.sqr(o),s=f(r);if(!n.eql(i,s))throw new Error("bad point: equation left != right");if(!e.isTorsionFree())throw new Error("bad point: not in prime-order subgroup");return!0}));class w{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw new Error("x required");if(null==t||!n.isValid(t))throw new Error("y required");if(null==r||!n.isValid(r))throw new Error("z required");Object.freeze(this)}static fromAffine(e){const{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw new Error("invalid affine point");if(e instanceof w)throw new Error("projective point not allowed");const o=e=>n.eql(e,n.ZERO);return o(t)&&o(r)?w.ZERO:new w(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){const t=n.invertBatch(e.map((e=>e.pz)));return e.map(((e,n)=>e.toAffine(t[n]))).map(w.fromAffine)}static fromHex(e){const t=w.fromAffine(u((0,s.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return w.BASE.multiply(d(e))}static msm(e,t){return(0,r.pippenger)(w,a,e,t)}_setWindowSize(e){v.setWindowSize(this,e)}assertValidity(){m(this)}hasEvenY(){const{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw new Error("Field doesn't support isOdd")}equals(e){y(e);const{px:t,py:r,pz:o}=this,{px:i,py:s,pz:a}=e,c=n.eql(n.mul(t,a),n.mul(i,o)),u=n.eql(n.mul(r,a),n.mul(s,o));return c&&u}negate(){return new w(this.px,n.neg(this.py),this.pz)}double(){const{a:e,b:r}=t,o=n.mul(r,p),{px:i,py:s,pz:a}=this;let c=n.ZERO,u=n.ZERO,f=n.ZERO,l=n.mul(i,i),h=n.mul(s,s),d=n.mul(a,a),y=n.mul(i,s);return y=n.add(y,y),f=n.mul(i,a),f=n.add(f,f),c=n.mul(e,f),u=n.mul(o,d),u=n.add(c,u),c=n.sub(h,u),u=n.add(h,u),u=n.mul(c,u),c=n.mul(y,c),f=n.mul(o,f),d=n.mul(e,d),y=n.sub(l,d),y=n.mul(e,y),y=n.add(y,f),f=n.add(l,l),l=n.add(f,l),l=n.add(l,d),l=n.mul(l,y),u=n.add(u,l),d=n.mul(s,a),d=n.add(d,d),l=n.mul(d,y),c=n.sub(c,l),f=n.mul(d,h),f=n.add(f,f),f=n.add(f,f),new w(c,u,f)}add(e){y(e);const{px:r,py:o,pz:i}=this,{px:s,py:a,pz:c}=e;let u=n.ZERO,f=n.ZERO,l=n.ZERO;const h=t.a,d=n.mul(t.b,p);let g=n.mul(r,s),m=n.mul(o,a),b=n.mul(i,c),v=n.add(r,o),E=n.add(s,a);v=n.mul(v,E),E=n.add(g,m),v=n.sub(v,E),E=n.add(r,i);let B=n.add(s,c);return E=n.mul(E,B),B=n.add(g,b),E=n.sub(E,B),B=n.add(o,i),u=n.add(a,c),B=n.mul(B,u),u=n.add(m,b),B=n.sub(B,u),l=n.mul(h,E),u=n.mul(d,b),l=n.add(u,l),u=n.sub(m,l),l=n.add(m,l),f=n.mul(u,l),m=n.add(g,g),m=n.add(m,g),b=n.mul(h,b),E=n.mul(d,E),m=n.add(m,b),b=n.sub(g,b),b=n.mul(h,b),E=n.add(E,b),g=n.mul(m,E),f=n.add(f,g),g=n.mul(B,E),u=n.mul(v,u),u=n.sub(u,g),g=n.mul(v,m),l=n.mul(B,l),l=n.add(l,g),new w(u,f,l)}subtract(e){return this.add(e.negate())}is0(){return this.equals(w.ZERO)}wNAF(e){return v.wNAFCached(this,e,w.normalizeZ)}multiplyUnsafe(e){const{endo:r,n:o}=t;i.aInRange("scalar",e,l,o);const s=w.ZERO;if(e===l)return s;if(this.is0()||e===h)return this;if(!r||v.hasPrecomputes(this))return v.wNAFCachedUnsafe(this,e,w.normalizeZ);let{k1neg:a,k1:c,k2neg:u,k2:f}=r.splitScalar(e),d=s,p=s,y=this;for(;c>l||f>l;)c&h&&(d=d.add(y)),f&h&&(p=p.add(y)),y=y.double(),c>>=h,f>>=h;return a&&(d=d.negate()),u&&(p=p.negate()),p=new w(n.mul(p.px,r.beta),p.py,p.pz),d.add(p)}multiply(e){const{endo:r,n:o}=t;let s,a;if(i.aInRange("scalar",e,h,o),r){const{k1neg:t,k1:o,k2neg:i,k2:c}=r.splitScalar(e);let{p:u,f}=this.wNAF(o),{p:l,f:h}=this.wNAF(c);u=v.constTimeNegate(t,u),l=v.constTimeNegate(i,l),l=new w(n.mul(l.px,r.beta),l.py,l.pz),s=u.add(l),a=f.add(h)}else{const{p:t,f:n}=this.wNAF(e);s=t,a=n}return w.normalizeZ([s,a])[0]}multiplyAndAddUnsafe(e,t,n){const r=w.BASE,o=(e,t)=>t!==l&&t!==h&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=o(this,t).add(o(e,n));return i.is0()?void 0:i}toAffine(e){return g(this,e)}isTorsionFree(){const{h:e,isTorsionFree:n}=t;if(e===h)return!0;if(n)return n(w,this);throw new Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){const{h:e,clearCofactor:n}=t;return e===h?this:n?n(w,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,s.abool)("isCompressed",e),this.assertValidity(),c(w,this,e)}toHex(e=!0){return(0,s.abool)("isCompressed",e),i.bytesToHex(this.toRawBytes(e))}}w.BASE=new w(t.Gx,t.Gy,n.ONE),w.ZERO=new w(n.ZERO,n.ONE,n.ZERO);const b=t.nBitLength,v=(0,r.wNAF)(w,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:w,normPrivateKeyToScalar:d,weierstrassEquation:f,isWithinCurveOrder:function(e){return i.inRange(e,h,t.n)}}}function m(e,t){const n=e.ORDER;let r=l;for(let e=n-h;e%d===l;e/=d)r+=h;const o=r,i=d<<o-h-h,s=i*d,a=(n-h)/s,c=(a-h)/d,u=s-h,f=i,g=e.pow(t,a),m=e.pow(t,(a+h)/d);let w=(t,n)=>{let r=g,i=e.pow(n,u),s=e.sqr(i);s=e.mul(s,n);let a=e.mul(t,s);a=e.pow(a,c),a=e.mul(a,i),i=e.mul(a,n),s=e.mul(a,t);let l=e.mul(s,i);a=e.pow(l,f);let p=e.eql(a,e.ONE);i=e.mul(s,m),a=e.mul(l,r),s=e.cmov(i,s,p),l=e.cmov(a,l,p);for(let t=o;t>h;t--){let n=t-d;n=d<<n-h;let o=e.pow(l,n);const a=e.eql(o,e.ONE);i=e.mul(s,r),r=e.mul(r,r),o=e.mul(l,r),s=e.cmov(i,s,a),l=e.cmov(o,l,a)}return{isValid:p,value:s}};if(e.ORDER%y===p){const n=(e.ORDER-p)/y,r=e.sqrt(e.neg(t));w=(t,o)=>{let i=e.sqr(o);const s=e.mul(t,o);i=e.mul(i,s);let a=e.pow(i,n);a=e.mul(a,s);const c=e.mul(a,r),u=e.mul(e.sqr(a),o),f=e.eql(u,t);return{isValid:f,value:e.cmov(c,a,f)}}}return w}},761:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.expand_message_xmd=u,t.expand_message_xof=f,t.hash_to_field=l,t.isogenyMap=function(e,t){const n=t.map((e=>Array.from(e).reverse()));return(t,r)=>{const[o,i,s,a]=n.map((n=>n.reduce(((n,r)=>e.add(e.mul(n,t),r)))));return t=e.div(o,i),r=e.mul(r,e.div(s,a)),{x:t,y:r}}},t.createHasher=function(e,t,n){if("function"!=typeof t)throw new Error("mapToCurve() must be defined");return{hashToCurve(r,o){const i=l(r,2,{...n,DST:n.DST,...o}),s=e.fromAffine(t(i[0])),a=e.fromAffine(t(i[1])),c=s.add(a).clearCofactor();return c.assertValidity(),c},encodeToCurve(r,o){const i=l(r,1,{...n,DST:n.encodeDST,...o}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(n){if(!Array.isArray(n))throw new Error("mapToCurve: expected array of bigints");for(const e of n)if("bigint"!=typeof e)throw new Error("mapToCurve: expected array of bigints");const r=e.fromAffine(t(n)).clearCofactor();return r.assertValidity(),r}}};const r=n(967),o=n(484),i=o.bytesToNumberBE;function s(e,t){if(c(e),c(t),e<0||e>=1<<8*t)throw new Error("invalid I2OSP input: "+e);const n=Array.from({length:t}).fill(0);for(let r=t-1;r>=0;r--)n[r]=255&e,e>>>=8;return new Uint8Array(n)}function a(e,t){const n=new Uint8Array(e.length);for(let r=0;r<e.length;r++)n[r]=e[r]^t[r];return n}function c(e){if(!Number.isSafeInteger(e))throw new Error("number expected")}function u(e,t,n,r){(0,o.abytes)(e),(0,o.abytes)(t),c(n),t.length>255&&(t=r((0,o.concatBytes)((0,o.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));const{outputLen:i,blockLen:u}=r,f=Math.ceil(n/i);if(n>65535||f>255)throw new Error("expand_message_xmd: invalid lenInBytes");const l=(0,o.concatBytes)(t,s(t.length,1)),h=s(0,u),d=s(n,2),p=new Array(f),y=r((0,o.concatBytes)(h,e,d,s(0,1),l));p[0]=r((0,o.concatBytes)(y,s(1,1),l));for(let e=1;e<=f;e++){const t=[a(y,p[e-1]),s(e+1,1),l];p[e]=r((0,o.concatBytes)(...t))}return(0,o.concatBytes)(...p).slice(0,n)}function f(e,t,n,r,i){if((0,o.abytes)(e),(0,o.abytes)(t),c(n),t.length>255){const e=Math.ceil(2*r/8);t=i.create({dkLen:e}).update((0,o.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(n>65535||t.length>255)throw new Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:n}).update(e).update(s(n,2)).update(t).update(s(t.length,1)).digest()}function l(e,t,n){(0,o.validateObject)(n,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});const{p:s,k:a,m:l,hash:h,expand:d,DST:p}=n;(0,o.abytes)(e),c(t);const y="string"==typeof p?(0,o.utf8ToBytes)(p):p,g=s.toString(2).length,m=Math.ceil((g+a)/8),w=t*l*m;let b;if("xmd"===d)b=u(e,y,w,h);else if("xof"===d)b=f(e,y,w,a,h);else{if("_internal_pass"!==d)throw new Error('expand must be "xmd" or "xof"');b=e}const v=new Array(t);for(let e=0;e<t;e++){const t=new Array(l);for(let n=0;n<l;n++){const o=m*(n+e*l),a=b.subarray(o,o+m);t[n]=(0,r.mod)(i(a),s)}v[e]=t}return v}},849:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.deriveKeysetId=t.deserializeMintKeys=t.serializeMintKeys=t.createRandomPrivateKey=t.getKeysetIdInt=t.pointFromHex=t.pointFromBytes=t.hash_e=t.hashToCurve=void 0;const r=n(510),o=n(623),i=n(484),s=n(629),a=n(287),c=(0,i.hexToBytes)("536563703235366b315f48617368546f43757276655f43617368755f");function u(e){return r.secp256k1.ProjectivePoint.fromHex(e)}function f(e){const t={};return Object.keys(e).forEach((n=>{t[n]=(0,i.bytesToHex)(e[n])})),t}t.hashToCurve=function(e){const t=(0,o.sha256)(a.Buffer.concat([c,e])),n=new Uint32Array(1);for(let e=0;e<65536;e++){const e=new Uint8Array(n.buffer),r=(0,o.sha256)(a.Buffer.concat([t,e]));try{return u((0,i.bytesToHex)(a.Buffer.concat([new Uint8Array([2]),r])))}catch(e){n[0]++}}throw new Error("No valid point found")},t.hash_e=function(e){const t=e.map((e=>e.toHex(!1))).join("");return(0,o.sha256)((new TextEncoder).encode(t))},t.pointFromBytes=function(e){return r.secp256k1.ProjectivePoint.fromHex((0,i.bytesToHex)(e))},t.pointFromHex=u,t.getKeysetIdInt=e=>{let t;return t=/^[a-fA-F0-9]+$/.test(e)?(0,s.hexToNumber)(e)%BigInt(2**31-1):(0,s.bytesToNumber)((0,s.encodeBase64toUint8)(e))%BigInt(2**31-1),t},t.createRandomPrivateKey=function(){return r.secp256k1.utils.randomPrivateKey()},t.serializeMintKeys=f,t.deserializeMintKeys=function(e){const t={};return Object.keys(e).forEach((n=>{t[n]=(0,i.hexToBytes)(e[n])})),t},t.deriveKeysetId=function(e){const t=Object.entries(f(e)).map((e=>[BigInt(e[0]),e[1]])).sort(((e,t)=>e[0]<t[0]?-1:e[0]>t[0]?1:0)).map((([,e])=>(0,i.hexToBytes)(e))).reduce(((e,t)=>function(e,t){const n=new Uint8Array(e.length+t.length);return n.set(e),n.set(t,e.length),n}(e,t)),new Uint8Array),n=(0,o.sha256)(t);return"00"+a.Buffer.from(n).toString("hex").slice(0,14)}},931:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.serializeBlindedMessage=t.deserializeProof=t.serializeProof=t.constructProofFromPromise=t.unblindSignature=t.blindMessage=t.createRandomBlindedMessage=void 0;const r=n(510),o=n(175),i=n(629),s=n(849),a=n(278);function c(e,t,n){const o=(0,s.hashToCurve)(e);t||(t=(0,i.bytesToNumber)(r.secp256k1.utils.randomPrivateKey()));const c=r.secp256k1.ProjectivePoint.BASE.multiply(t),u=o.add(c);return void 0!==n?(0,a.getSignedOutput)({B_:u,r:t,secret:e},n):{B_:u,r:t,secret:e}}function u(e,t,n){return e.subtract(n.multiply(t))}t.createRandomBlindedMessage=function(e){return c((0,o.randomBytes)(32),(0,i.bytesToNumber)(r.secp256k1.utils.randomPrivateKey()),e)},t.blindMessage=c,t.unblindSignature=u,t.constructProofFromPromise=function(e,t,n,r){const o=r,i=u(e.C_,t,o);return{id:e.id,amount:e.amount,secret:n,C:i}},t.serializeProof=e=>({amount:e.amount,C:e.C.toHex(!0),id:e.id,secret:(new TextDecoder).decode(e.secret),witness:JSON.stringify(e.witness)}),t.deserializeProof=e=>({amount:e.amount,C:(0,s.pointFromHex)(e.C),id:e.id,secret:(new TextEncoder).encode(e.secret),witness:e.witness?JSON.parse(e.witness):void 0}),t.serializeBlindedMessage=(e,t)=>({B_:e.B_.toHex(!0),amount:t})},941:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.pbkdf2=function(e,t,n,r){const{c:o,dkLen:c,DK:u,PRF:f,PRFSalt:l}=s(e,t,n,r);let h;const d=new Uint8Array(4),p=(0,i.createView)(d),y=new Uint8Array(f.outputLen);for(let e=1,t=0;t<c;e++,t+=f.outputLen){const n=u.subarray(t,t+f.outputLen);p.setInt32(0,e,!1),(h=l._cloneInto(h)).update(d).digestInto(y),n.set(y.subarray(0,n.length));for(let e=1;e<o;e++){f._cloneInto(h).update(y).digestInto(y);for(let e=0;e<n.length;e++)n[e]^=y[e]}}return a(f,l,u,h,y)},t.pbkdf2Async=async function(e,t,n,r){const{c:o,dkLen:c,asyncTick:u,DK:f,PRF:l,PRFSalt:h}=s(e,t,n,r);let d;const p=new Uint8Array(4),y=(0,i.createView)(p),g=new Uint8Array(l.outputLen);for(let e=1,t=0;t<c;e++,t+=l.outputLen){const n=f.subarray(t,t+l.outputLen);y.setInt32(0,e,!1),(d=h._cloneInto(d)).update(p).digestInto(g),n.set(g.subarray(0,n.length)),await(0,i.asyncLoop)(o-1,u,(()=>{l._cloneInto(d).update(g).digestInto(g);for(let e=0;e<n.length;e++)n[e]^=g[e]}))}return a(l,h,f,d,g)};const r=n(557),o=n(615),i=n(175);function s(e,t,n,s){(0,r.ahash)(e);const a=(0,i.checkOpts)({dkLen:32,asyncTick:10},s),{c,dkLen:u,asyncTick:f}=a;if((0,r.anumber)(c),(0,r.anumber)(u),(0,r.anumber)(f),c<1)throw new Error("PBKDF2: iterations (c) should be >= 1");const l=(0,i.toBytes)(t),h=(0,i.toBytes)(n),d=new Uint8Array(u),p=o.hmac.create(e,l),y=p._cloneInto().update(h);return{c,dkLen:u,asyncTick:f,DK:d,PRF:p,PRFSalt:y}}function a(e,t,n,r,o){return e.destroy(),t.destroy(),r&&r.destroy(),o.fill(0),n}},967:(e,t,n)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isNegativeLE=void 0,t.mod=l,t.pow=h,t.pow2=function(e,t,n){let r=e;for(;t-- >o;)r*=r,r%=n;return r},t.invert=d,t.tonelliShanks=p,t.FpSqrt=y,t.validateField=function(e){const t=g.reduce(((e,t)=>(e[t]="function",e)),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,r.validateObject)(e,t)},t.FpPow=m,t.FpInvertBatch=w,t.FpDiv=function(e,t,n){return e.mul(t,"bigint"==typeof n?d(n,e.ORDER):e.inv(n))},t.FpLegendre=b,t.FpIsSquare=function(e){const t=b(e.ORDER);return n=>{const r=t(e,n);return e.eql(r,e.ZERO)||e.eql(r,e.ONE)}},t.nLength=v,t.Field=function(e,t,n=!1,s={}){if(e<=o)throw new Error("invalid field: expected ORDER > 0, got "+e);const{nBitLength:a,nByteLength:c}=v(e,t);if(c>2048)throw new Error("invalid field: expected ORDER of <= 2048 bytes");let u;const f=Object.freeze({ORDER:e,isLE:n,BITS:a,BYTES:c,MASK:(0,r.bitMask)(a),ZERO:o,ONE:i,create:t=>l(t,e),isValid:t=>{if("bigint"!=typeof t)throw new Error("invalid field element: expected bigint, got "+typeof t);return o<=t&&t<e},is0:e=>e===o,isOdd:e=>(e&i)===i,neg:t=>l(-t,e),eql:(e,t)=>e===t,sqr:t=>l(t*t,e),add:(t,n)=>l(t+n,e),sub:(t,n)=>l(t-n,e),mul:(t,n)=>l(t*n,e),pow:(e,t)=>m(f,e,t),div:(t,n)=>l(t*d(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>d(t,e),sqrt:s.sqrt||(t=>(u||(u=y(e)),u(f,t))),invertBatch:e=>w(f,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>n?(0,r.numberToBytesLE)(e,c):(0,r.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw new Error("Field.fromBytes: expected "+c+" bytes, got "+e.length);return n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e)}});return Object.freeze(f)},t.FpSqrtOdd=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?n:e.neg(n)},t.FpSqrtEven=function(e,t){if(!e.isOdd)throw new Error("Field doesn't have isOdd");const n=e.sqrt(t);return e.isOdd(n)?e.neg(n):n},t.hashToPrivateScalar=function(e,t,n=!1){const o=(e=(0,r.ensureBytes)("privateHash",e)).length,s=v(t).nByteLength+8;if(s<24||o<s||o>1024)throw new Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+o);return l(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-i)+i},t.getFieldBytesLength=E,t.getMinHashLength=B,t.mapHashToField=function(e,t,n=!1){const o=e.length,s=E(t),a=B(t);if(o<16||o<a||o>1024)throw new Error("expected "+a+"-1024 bytes of input, got "+o);const c=l(n?(0,r.bytesToNumberLE)(e):(0,r.bytesToNumberBE)(e),t-i)+i;return n?(0,r.numberToBytesLE)(c,s):(0,r.numberToBytesBE)(c,s)};const r=n(484),o=BigInt(0),i=BigInt(1),s=BigInt(2),a=BigInt(3),c=BigInt(4),u=BigInt(5),f=BigInt(8);function l(e,t){const n=e%t;return n>=o?n:t+n}function h(e,t,n){if(t<o)throw new Error("invalid exponent, negatives unsupported");if(n<=o)throw new Error("invalid modulus");if(n===i)return o;let r=i;for(;t>o;)t&i&&(r=r*e%n),e=e*e%n,t>>=i;return r}function d(e,t){if(e===o)throw new Error("invert: expected non-zero number");if(t<=o)throw new Error("invert: expected positive modulus, got "+t);let n=l(e,t),r=t,s=o,a=i,c=i,u=o;for(;n!==o;){const e=r/n,t=r%n,o=s-c*e,i=a-u*e;r=n,n=t,s=c,a=u,c=o,u=i}if(r!==i)throw new Error("invert: does not exist");return l(s,t)}function p(e){const t=(e-i)/s;let n,r,a;for(n=e-i,r=0;n%s===o;n/=s,r++);for(a=s;a<e&&h(a,t,e)!==e-i;a++)if(a>1e3)throw new Error("Cannot find square root: likely non-prime P");if(1===r){const t=(e+i)/c;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}const u=(n+i)/s;return function(e,o){if(e.pow(o,t)===e.neg(e.ONE))throw new Error("Cannot find square root");let s=r,c=e.pow(e.mul(e.ONE,a),n),f=e.pow(o,u),l=e.pow(o,n);for(;!e.eql(l,e.ONE);){if(e.eql(l,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(l);t<s&&!e.eql(n,e.ONE);t++)n=e.sqr(n);const n=e.pow(c,i<<BigInt(s-t-1));c=e.sqr(n),f=e.mul(f,n),l=e.mul(l,c),s=t}return f}}function y(e){if(e%c===a){const t=(e+i)/c;return function(e,n){const r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw new Error("Cannot find square root");return r}}if(e%f===u){const t=(e-u)/f;return function(e,n){const r=e.mul(n,s),o=e.pow(r,t),i=e.mul(n,o),a=e.mul(e.mul(i,s),o),c=e.mul(i,e.sub(a,e.ONE));if(!e.eql(e.sqr(c),n))throw new Error("Cannot find square root");return c}}return p(e)}t.isNegativeLE=(e,t)=>(l(e,t)&i)===i;const g=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function m(e,t,n){if(n<o)throw new Error("invalid exponent, negatives unsupported");if(n===o)return e.ONE;if(n===i)return t;let r=e.ONE,s=t;for(;n>o;)n&i&&(r=e.mul(r,s)),s=e.sqr(s),n>>=i;return r}function w(e,t){const n=new Array(t.length),r=t.reduce(((t,r,o)=>e.is0(r)?t:(n[o]=t,e.mul(t,r))),e.ONE),o=e.inv(r);return t.reduceRight(((t,r,o)=>e.is0(r)?t:(n[o]=e.mul(t,n[o]),e.mul(t,r))),o),n}function b(e){const t=(e-i)/s;return(e,n)=>e.pow(n,t)}function v(e,t){const n=void 0!==t?t:e.toString(2).length;return{nBitLength:n,nByteLength:Math.ceil(n/8)}}function E(e){if("bigint"!=typeof e)throw new Error("field order must be bigint");const t=e.toString(2).length;return Math.ceil(t/8)}function B(e){const t=E(e);return t+Math.ceil(t/2)}}},t={};function n(r){var o=t[r];if(void 0!==o)return o.exports;var i=t[r]={exports:{}};return e[r](i,i.exports,n),i.exports}n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),n.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var r={};return(()=>{"use strict";n.r(r),n.d(r,{createQuote:()=>ce,decodeToken:()=>de,encodeToken:()=>he,fetchProofs:()=>fe,initializeWallet:()=>ae,sendTokens:()=>le,waitForPayment:()=>ue});var e=n(427),t=n(849);function o(e){if(!((t=e)instanceof Uint8Array||ArrayBuffer.isView(t)&&"Uint8Array"===t.constructor.name))throw new Error("Uint8Array expected");var t}const i=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function s(e){o(e);let t="";for(let n=0;n<e.length;n++)t+=i[e[n]];return t}function a(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function c(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,o=0;t<n;t++,o+=2){const n=a(e.charCodeAt(o)),i=a(e.charCodeAt(o+1));if(void 0===n||void 0===i){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[t]=16*n+i}return r}const u="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,f=Array.from({length:256},((e,t)=>t.toString(16).padStart(2,"0")));function l(e){!function(e,...t){if(!((n=e)instanceof Uint8Array||ArrayBuffer.isView(n)&&"Uint8Array"===n.constructor.name))throw new Error("Uint8Array expected");var n;if(t.length>0&&!t.includes(e.length))throw new Error("Uint8Array expected of length "+t+", got length="+e.length)}(e);let t="";for(let n=0;n<e.length;n++)t+=f[e[n]];return t}function h(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:void 0}function d(e){if("string"!=typeof e)throw new Error("hex string expected, got "+typeof e);const t=e.length,n=t/2;if(t%2)throw new Error("hex string expected, got unpadded hex of length "+t);const r=new Uint8Array(n);for(let t=0,o=0;t<n;t++,o+=2){const n=h(e.charCodeAt(o)),i=h(e.charCodeAt(o+1));if(void 0===n||void 0===i){const t=e[o]+e[o+1];throw new Error('hex string expected, got non-hex character "'+t+'" at index '+o)}r[t]=16*n+i}return r}function p(e=32){if(u&&"function"==typeof u.getRandomValues)return u.getRandomValues(new Uint8Array(e));if(u&&"function"==typeof u.randomBytes)return u.randomBytes(e);throw new Error("crypto.getRandomValues must be defined")}var y=n(287),g=n(931),m=n(278),w=n(527);function b(e){return"number"==typeof e||"string"==typeof e}function v(e){const t=[];return E(e,t),new Uint8Array(t)}function E(e,t){if(null===e)t.push(246);else if(void 0===e)t.push(247);else if("boolean"==typeof e)t.push(e?245:244);else if("number"==typeof e)B(e,t);else if("string"==typeof e)x(e,t);else if(Array.isArray(e))!function(e,t){const n=e.length;if(n<24)t.push(128|n);else if(n<256)t.push(152,n);else{if(!(n<65536))throw new Error("Unsupported array length");t.push(153,n>>8,255&n)}for(const n of e)E(n,t)}(e,t);else if(e instanceof Uint8Array)!function(e,t){const n=e.length;if(n<24)t.push(64+n);else if(n<256)t.push(88,n);else if(n<65536)t.push(89,n>>8&255,255&n);else{if(!(n<4294967296))throw new Error("Byte string too long to encode");t.push(90,n>>24&255,n>>16&255,n>>8&255,255&n)}for(let n=0;n<e.length;n++)t.push(e[n])}(e,t);else{if("object"!=typeof e)throw new Error("Unsupported type");!function(e,t){const n=Object.keys(e);B(n.length,t),t[t.length-1]|=160;for(const r of n)x(r,t),E(e[r],t)}(e,t)}}function B(e,t){if(e<24)t.push(e);else if(e<256)t.push(24,e);else if(e<65536)t.push(25,e>>8,255&e);else{if(!(e<4294967296))throw new Error("Unsupported integer size");t.push(26,e>>24,e>>16&255,e>>8&255,255&e)}}function x(e,t){const n=(new TextEncoder).encode(e),r=n.length;if(r<24)t.push(96+r);else if(r<256)t.push(120,r);else if(r<65536)t.push(121,r>>8&255,255&r);else{if(!(r<4294967296))throw new Error("String too long to encode");t.push(122,r>>24&255,r>>16&255,r>>8&255,255&r)}for(let e=0;e<n.length;e++)t.push(n[e])}function k(e){return A(new DataView(e.buffer,e.byteOffset,e.byteLength),0).value}function A(e,t){if(t>=e.byteLength)throw new Error("Unexpected end of data");const n=e.getUint8(t++),r=n>>5,o=31&n;switch(r){case 0:return function(e,t,n){const{value:r,offset:o}=S(e,t,n);return{value:r,offset:o}}(e,t,o);case 1:return function(e,t,n){const{value:r,offset:o}=S(e,t,n);return{value:-1-r,offset:o}}(e,t,o);case 2:return function(e,t,n){const{value:r,offset:o}=S(e,t,n);if(o+r>e.byteLength)throw new Error("Byte string length exceeds data length");return{value:new Uint8Array(e.buffer,e.byteOffset+o,r),offset:o+r}}(e,t,o);case 3:return function(e,t,n){const{value:r,offset:o}=S(e,t,n);if(o+r>e.byteLength)throw new Error("String length exceeds data length");const i=new Uint8Array(e.buffer,e.byteOffset+o,r);return{value:(new TextDecoder).decode(i),offset:o+r}}(e,t,o);case 4:return function(e,t,n){const{value:r,offset:o}=S(e,t,n),i=[];let s=o;for(let t=0;t<r;t++){const t=A(e,s);i.push(t.value),s=t.offset}return{value:i,offset:s}}(e,t,o);case 5:return function(e,t,n){const{value:r,offset:o}=S(e,t,n),i={};let s=o;for(let t=0;t<r;t++){const t=A(e,s);if(!b(t.value))throw new Error("Invalid key type");const n=A(e,t.offset);i[t.value]=n.value,s=n.offset}return{value:i,offset:s}}(e,t,o);case 7:return function(e,t,n){if(n<24)switch(n){case 20:return{value:!1,offset:t};case 21:return{value:!0,offset:t};case 22:return{value:null,offset:t};case 23:return{value:void 0,offset:t};default:throw new Error(`Unknown simple value: ${n}`)}if(24===n)return{value:e.getUint8(t++),offset:t};if(25===n){const n=function(e){const t=(31744&e)>>10,n=1023&e,r=32768&e?-1:1;return 0===t?r*2**-14*(n/1024):31===t?n?NaN:r*(1/0):r*2**(t-15)*(1+n/1024)}(e.getUint16(t,!1));return{value:n,offset:t+=2}}if(26===n)return{value:e.getFloat32(t,!1),offset:t+=4};if(27===n)return{value:e.getFloat64(t,!1),offset:t+=8};throw new Error(`Unknown simple or float value: ${n}`)}(e,t,o);default:throw new Error(`Unsupported major type: ${r}`)}}function S(e,t,n){if(n<24)return{value:n,offset:t};if(24===n)return{value:e.getUint8(t++),offset:t};if(25===n)return{value:e.getUint16(t,!1),offset:t+=2};if(26===n)return{value:e.getUint32(t,!1),offset:t+=4};if(27===n)return{value:e.getUint32(t,!1)*2**32+e.getUint32(t+4,!1),offset:t+=8};throw new Error(`Unsupported length: ${n}`)}function I(e,t,n,r){if(n){const r=K(n);if(r>e)throw new Error(`Split is greater than total amount: ${r} > ${e}`);if(n.some((e=>!U(e,t))))throw new Error("Provided amount preferences do not match the amounts of the mint keyset.");e-=K(n)}else n=[];return T(t,"desc").forEach((t=>{const r=Math.floor(e/t);for(let e=0;e<r;++e)n?.push(t);e%=t})),n.sort(((e,t)=>e-t))}function _(e,t,n,r){const o=[],i=e.map((e=>e.amount));T(n,"asc").forEach((e=>{const n=i.filter((t=>t===e)).length,s=Math.max(r-n,0);for(let n=0;n<s&&!(o.reduce(((e,t)=>e+t),0)+e>t);++n)o.push(e)}));const s=t-o.reduce(((e,t)=>e+t),0);return s&&I(s,n).forEach((e=>{o.push(e)})),o.sort(((e,t)=>e-t))}function T(e,t="desc"){return"desc"==t?Object.keys(e).map((e=>parseInt(e))).sort(((e,t)=>t-e)):Object.keys(e).map((e=>parseInt(e))).sort(((e,t)=>e-t))}function U(e,t){return e in t}function P(e){return BigInt(`0x${e}`)}function O(e){return/^[a-f0-9]*$/i.test(e)}function L(e){return Array.isArray(e)?e.some((e=>!O(e.id))):O(e.id)}function R(e,t){if(L(e.proofs)||3===t?.version){if(4===t?.version)throw new Error("can not encode to v4 token if proofs contain non-hex keyset id");return function(e){const t={token:[{mint:e.mint,proofs:e.proofs}]};return e.unit&&(t.unit=e.unit),e.memo&&(t.memo=e.memo),"cashuA"+function(e){const t=JSON.stringify(e);return function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").split("=")[0]}(y.Buffer.from(t).toString("base64"))}(t)}(e)}return function(e){if(e.proofs.forEach((e=>{if(e.dleq&&null==e.dleq.r)throw new Error("Missing blinding factor in included DLEQ proof")})),L(e.proofs))throw new Error("can not encode to v4 token if proofs contain non-hex keyset id");const t=function(e){const t={},n=e.mint;for(let n=0;n<e.proofs.length;n++){const r=e.proofs[n];t[r.id]?t[r.id].push(r):t[r.id]=[r]}const r={m:n,u:e.unit||"sat",t:Object.keys(t).map((e=>({i:c(e),p:t[e].map((e=>({a:e.amount,s:e.secret,c:c(e.C),...e.dleq&&{d:{e:c(e.dleq.e),s:c(e.dleq.s),r:c(e.dleq.r??"00")}}})))})))};return e.memo&&(r.d=e.memo),r}(e),n=function(e){return y.Buffer.from(e).toString("base64").replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}(v(t));return"cashuB"+n}(e)}function C(e){return["web+cashu://","cashu://","cashu:","cashu"].forEach((t=>{e.startsWith(t)&&(e=e.slice(t.length))})),function(e){const t=e.slice(0,1),n=e.slice(1);if("A"===t){const e=function(e){const t=y.Buffer.from(function(e){return e.replace(/-/g,"+").replace(/_/g,"/").split("=")[0]}(e),"base64").toString();return JSON.parse(t)}(n);if(e.token.length>1)throw new Error("Multi entry token are not supported");const t=e.token[0],r={mint:t.mint,proofs:t.proofs,unit:e.unit||"sat"};return e.memo&&(r.memo=e.memo),r}if("B"===t)return function(e){const t=[];e.t.forEach((e=>e.p.forEach((n=>{t.push({secret:n.s,C:s(n.c),amount:n.a,id:s(e.i),...n.d&&{dleq:{r:s(n.d.r),s:s(n.d.s),e:s(n.d.e)}}})}))));const n={mint:e.m,proofs:t,unit:e.u||"sat"};return e.d&&(n.memo=e.d),n}(k(function(e){return y.Buffer.from(e,"base64")}(n)));throw new Error("Token version is not supported")}(e)}function M(e){return"object"==typeof e}function H(...e){return e.map((e=>e.replace(/(^\/+|\/+$)/g,""))).join("/")}function F(e){return e.reduce(((e,t)=>e+t.amount),0)}class N{get value(){return this._value}set value(e){this._value=e}get next(){return this._next}set next(e){this._next=e}constructor(e){this._value=e,this._next=null}}class D{get first(){return this._first}set first(e){this._first=e}get last(){return this._last}set last(e){this._last=e}get size(){return this._size}set size(e){this._size=e}constructor(){this._first=null,this._last=null,this._size=0}enqueue(e){const t=new N(e);return 0!==this._size&&this._last?(this._last.next=t,this._last=t):(this._first=t,this._last=t),this._size++,!0}dequeue(){if(0===this._size||!this._first)return null;const e=this._first;return this._first=e.next,e.next=null,this._size--,e.value}}function q(e){return e.map((e=>{const t={...e};return delete t.dleq,delete t.dleqValid,t}))}function K(e){return e.reduce(((e,t)=>e+t),0)}let j;typeof WebSocket<"u"&&(j=WebSocket);class z{constructor(){this.connectionMap=new Map}static getInstance(){return z.instace||(z.instace=new z),z.instace}getConnection(e){if(this.connectionMap.has(e))return this.connectionMap.get(e);const t=new $(e);return this.connectionMap.set(e,t),t}}class ${constructor(e){this.subListeners={},this.rpcListeners={},this.rpcId=0,this._WS=j,this.url=new URL(e),this.messageQueue=new D}connect(){return this.connectionPromise||(this.connectionPromise=new Promise(((e,t)=>{try{this.ws=new this._WS(this.url)}catch(e){return void t(e)}this.ws.onopen=()=>{e()},this.ws.onerror=()=>{t(new Error("Failed to open WebSocket"))},this.ws.onmessage=e=>{this.messageQueue.enqueue(e.data),this.handlingInterval||(this.handlingInterval=setInterval(this.handleNextMesage.bind(this),0))},this.ws.onclose=()=>{this.connectionPromise=void 0}}))),this.connectionPromise}sendRequest(e,t){if(1!==this.ws?.readyState)throw new Error("Socket not open...");const n=this.rpcId;this.rpcId++;const r=JSON.stringify({jsonrpc:"2.0",method:e,params:t,id:n});this.ws?.send(r)}closeSubscription(e){this.ws?.send(JSON.stringify(["CLOSE",e]))}addSubListener(e,t){(this.subListeners[e]=this.subListeners[e]||[]).push(t)}addRpcListener(e,t,n){this.rpcListeners[n]={callback:e,errorCallback:t}}removeRpcListener(e){delete this.rpcListeners[e]}removeListener(e,t){1!==this.subListeners[e].length?this.subListeners[e]=this.subListeners[e].filter((e=>e!==t)):delete this.subListeners[e]}async ensureConnection(){1!==this.ws?.readyState&&await this.connect()}handleNextMesage(){if(0===this.messageQueue.size)return clearInterval(this.handlingInterval),void(this.handlingInterval=void 0);const e=this.messageQueue.dequeue();let t;try{if(t=JSON.parse(e),"result"in t&&null!=t.id)this.rpcListeners[t.id]&&(this.rpcListeners[t.id].callback(),this.removeRpcListener(t.id));else if("error"in t&&null!=t.id)this.rpcListeners[t.id]&&(this.rpcListeners[t.id].errorCallback(t.error),this.removeRpcListener(t.id));else if("method"in t&&!("id"in t)){const e=t.params.subId;if(!e)return;if(this.subListeners[e]?.length>0){const n=t;this.subListeners[e].forEach((e=>e(n.params.payload)))}}}catch(e){return void console.error(e)}}createSubscription(e,t,n){if(1!==this.ws?.readyState)return n(new Error("Socket is not open"));const r=(Math.random()+1).toString(36).substring(7);return this.addRpcListener((()=>{this.addSubListener(r,t)}),(e=>{n(new Error(e.message))}),this.rpcId),this.sendRequest("subscribe",{...e,subId:r}),this.rpcId++,r}cancelSubscription(e,t){this.removeListener(e,t),this.rpcId++,this.sendRequest("unsubscribe",{subId:e})}get activeSubscriptions(){return Object.keys(this.subListeners)}close(){this.ws&&this.ws?.close()}}var V=(e=>(e.UNPAID="UNPAID",e.PENDING="PENDING",e.PAID="PAID",e))(V||{}),W=(e=>(e.UNPAID="UNPAID",e.PAID="PAID",e.ISSUED="ISSUED",e))(W||{});class G extends Error{constructor(e,t){super(e),this.status=t}}let Q={};async function Z(e){return await async function({endpoint:e,requestBody:t,headers:n,...r}){const o=t?JSON.stringify(t):void 0,i={Accept:"application/json, text/plain, */*",...o?{"Content-Type":"application/json"}:void 0,...n},s=await fetch(e,{body:o,headers:i,...r});if(!s.ok){const{error:e,detail:t}=await s.json().catch((()=>({error:"bad response"})));throw new G(e||t||"bad response",s.status)}try{return await s.json()}catch(e){throw console.error("Failed to parse HTTP response",e),new G("bad response",s.status)}}({...e,...Q})}function Y(e){return e.state||(console.warn("Field 'state' not found in MeltQuoteResponse. Update NUT-05 of mint: https://github.com/cashubtc/nuts/pull/136)"),"boolean"==typeof e.paid&&(e.state=e.paid?V.PAID:V.UNPAID)),e}function J(e){return e.state||(console.warn("Field 'state' not found in MintQuoteResponse. Update NUT-04 of mint: https://github.com/cashubtc/nuts/pull/141)"),"boolean"==typeof e.paid&&(e.state=e.paid?W.PAID:W.UNPAID)),e}class X{constructor(e,t){this._mintUrl=e,this._customRequest=t,this._mintUrl=e.replace(/\/$/,""),this._customRequest=t}get mintUrl(){return this._mintUrl}static async getInfo(e,t){return n=await(t||Z)({endpoint:H(e,"/v1/info")}),Array.isArray(n?.contact)&&n?.contact.length>0&&(n.contact=n.contact.map((e=>Array.isArray(e)&&2===e.length&&"string"==typeof e[0]&&"string"==typeof e[1]?(console.warn("Mint returned deprecated 'contact' field: Update NUT-06: https://github.com/cashubtc/nuts/pull/117"),{method:e[0],info:e[1]}):e))),n;var n}async getInfo(){return X.getInfo(this._mintUrl,this._customRequest)}static async swap(e,t,n){const r=await(n||Z)({endpoint:H(e,"/v1/swap"),method:"POST",requestBody:t});if(!M(r)||!Array.isArray(r?.signatures))throw new Error(r.detail??"bad response");return r}async swap(e){return X.swap(this._mintUrl,e,this._customRequest)}static async createMintQuote(e,t,n){return J(await(n||Z)({endpoint:H(e,"/v1/mint/quote/bolt11"),method:"POST",requestBody:t}))}async createMintQuote(e){return X.createMintQuote(this._mintUrl,e,this._customRequest)}static async checkMintQuote(e,t,n){return J(await(n||Z)({endpoint:H(e,"/v1/mint/quote/bolt11",t),method:"GET"}))}async checkMintQuote(e){return X.checkMintQuote(this._mintUrl,e,this._customRequest)}static async mint(e,t,n){const r=await(n||Z)({endpoint:H(e,"/v1/mint/bolt11"),method:"POST",requestBody:t});if(!M(r)||!Array.isArray(r?.signatures))throw new Error("bad response");return r}async mint(e){return X.mint(this._mintUrl,e,this._customRequest)}static async createMeltQuote(e,t,n){const r=Y(await(n||Z)({endpoint:H(e,"/v1/melt/quote/bolt11"),method:"POST",requestBody:t}));if(!M(r)||"number"!=typeof r?.amount||"number"!=typeof r?.fee_reserve||"string"!=typeof r?.quote)throw new Error("bad response");return r}async createMeltQuote(e){return X.createMeltQuote(this._mintUrl,e,this._customRequest)}static async checkMeltQuote(e,t,n){const r=Y(await(n||Z)({endpoint:H(e,"/v1/melt/quote/bolt11",t),method:"GET"}));if(!M(r)||"number"!=typeof r?.amount||"number"!=typeof r?.fee_reserve||"string"!=typeof r?.quote||"string"!=typeof r?.state||!Object.values(V).includes(r.state))throw new Error("bad response");return r}async checkMeltQuote(e){return X.checkMeltQuote(this._mintUrl,e,this._customRequest)}static async melt(e,t,n){const r=Y(await(n||Z)({endpoint:H(e,"/v1/melt/bolt11"),method:"POST",requestBody:t}));if(!M(r)||"string"!=typeof r?.state||!Object.values(V).includes(r.state))throw new Error("bad response");return r}async melt(e){return X.melt(this._mintUrl,e,this._customRequest)}static async check(e,t,n){const r=await(n||Z)({endpoint:H(e,"/v1/checkstate"),method:"POST",requestBody:t});if(!M(r)||!Array.isArray(r?.states))throw new Error("bad response");return r}static async getKeys(e,t,n){t&&(t=t.replace(/\//g,"_").replace(/\+/g,"-"));const r=await(n||Z)({endpoint:t?H(e,"/v1/keys",t):H(e,"/v1/keys")});if(!M(r)||!Array.isArray(r.keysets))throw new Error("bad response");return r}async getKeys(e,t){return await X.getKeys(t||this._mintUrl,e,this._customRequest)}static async getKeySets(e,t){return(t||Z)({endpoint:H(e,"/v1/keysets")})}async getKeySets(){return X.getKeySets(this._mintUrl,this._customRequest)}async check(e){return X.check(this._mintUrl,e,this._customRequest)}static async restore(e,t,n){const r=await(n||Z)({endpoint:H(e,"/v1/restore"),method:"POST",requestBody:t});if(!M(r)||!Array.isArray(r?.outputs)||!Array.isArray(r?.promises))throw new Error("bad response");return r}async restore(e){return X.restore(this._mintUrl,e,this._customRequest)}async connectWebSocket(){if(this.ws)await this.ws.ensureConnection();else{const e=new URL(this._mintUrl),t="v1/ws";e.pathname&&(e.pathname.endsWith("/")?e.pathname+=t:e.pathname+="/"+t),this.ws=z.getInstance().getConnection(`${"https:"===e.protocol?"wss":"ws"}://${e.host}${e.pathname}`);try{await this.ws.connect()}catch(e){throw console.log(e),new Error("Failed to connect to WebSocket...")}}}disconnectWebSocket(){this.ws&&this.ws.close()}get webSocketConnection(){return this.ws}}class ee{constructor(e){this._mintInfo=e}isSupported(e){switch(e){case 4:case 5:return this.checkMintMelt(e);case 7:case 8:case 9:case 10:case 11:case 12:case 14:return this.checkGenericNut(e);case 17:return this.checkNut17();case 15:return this.checkNut15();default:throw new Error("nut is not supported by cashu-ts")}}checkGenericNut(e){return this._mintInfo.nuts[e]?.supported?{supported:!0}:{supported:!1}}checkMintMelt(e){const t=this._mintInfo.nuts[e];return t&&t.methods.length>0&&!t.disabled?{disabled:!1,params:t.methods}:{disabled:!0,params:t.methods}}checkNut17(){return this._mintInfo.nuts[17]&&this._mintInfo.nuts[17].supported.length>0?{supported:!0,params:this._mintInfo.nuts[17].supported}:{supported:!1}}checkNut15(){return this._mintInfo.nuts[15]&&this._mintInfo.nuts[15].methods.length>0?{supported:!0,params:this._mintInfo.nuts[15].methods}:{supported:!1}}get contact(){return this._mintInfo.contact}get description(){return this._mintInfo.description}get description_long(){return this._mintInfo.description_long}get name(){return this._mintInfo.name}get pubkey(){return this._mintInfo.pubkey}get nuts(){return this._mintInfo.nuts}get version(){return this._mintInfo.version}get motd(){return this._mintInfo.motd}}class te{constructor(e,t,n){this.amount=e,this.B_=t,this.id=n}getSerializedBlindedMessage(){return{amount:this.amount,B_:this.B_.toHex(!0),id:this.id}}}function ne(e){return"function"==typeof e}class re{constructor(e,t,n){this.secret=n,this.blindingFactor=t,this.blindedMessage=e}toProof(n,r){let o;n.dleq&&(o={s:d(n.dleq.s),e:d(n.dleq.e),r:this.blindingFactor});const i={id:n.id,amount:n.amount,C_:(0,t.pointFromHex)(n.C_),dleq:o},s=(0,t.pointFromHex)(r.keys[n.amount]),a=(0,g.constructProofFromPromise)(i,this.blindingFactor,this.secret,s);return{...(0,g.serializeProof)(a),...o&&{dleqValid:(0,e.verifyDLEQProof_reblind)(this.secret,o,a.C,s)},...o&&{dleq:{s:l(o.s),e:l(o.e),r:(c=o.r??BigInt(0),c.toString(16).padStart(64,"0"))}}};var c}static createP2PKData(e,t,n,r){return I(t,n.keys,r).map((t=>this.createSingleP2PKData(e,t,n.id)))}static createSingleP2PKData(e,t,n){const r=["P2PK",{nonce:l(p(32)),data:e.pubkey,tags:[]}];e.locktime&&r[1].tags.push(["locktime",e.locktime]),e.refundKeys&&r[1].tags.push(["refund",e.refundKeys]);const o=JSON.stringify(r),i=(new TextEncoder).encode(o),{r:s,B_:a}=(0,g.blindMessage)(i);return new re(new te(t,a,n).getSerializedBlindedMessage(),s,i)}static createRandomData(e,t,n){return I(e,t.keys,n).map((e=>this.createSingleRandomData(e,t.id)))}static createSingleRandomData(e,t){const n=l(p(32)),r=(new TextEncoder).encode(n),{r:o,B_:i}=(0,g.blindMessage)(r);return new re(new te(e,i,t).getSerializedBlindedMessage(),o,r)}static createDeterministicData(e,t,n,r,o){return I(e,r.keys,o).map(((e,o)=>this.createSingleDeterministicData(e,t,n+o,r.id)))}static createSingleDeterministicData(e,t,n,r){const o=l((0,w.deriveSecret)(t,r,n)),i=(new TextEncoder).encode(o),a=P(s((0,w.deriveBlindingFactor)(t,r,n))),{r:c,B_:u}=(0,g.blindMessage)(i,a);return new re(new te(e,u,r).getSerializedBlindedMessage(),c,i)}}class oe{constructor(e,t){this._keys=new Map,this._keysets=[],this._seed=void 0,this._unit="sat",this._mintInfo=void 0,this._denominationTarget=3,this.mint=e;let n=[];if(t?.keys&&!Array.isArray(t.keys)?n=[t.keys]:t?.keys&&Array.isArray(t?.keys)&&(n=t?.keys),n&&n.forEach((e=>this._keys.set(e.id,e))),t?.unit&&(this._unit=t?.unit),t?.keysets&&(this._keysets=t.keysets),t?.mintInfo&&(this._mintInfo=new ee(t.mintInfo)),t?.denominationTarget&&(this._denominationTarget=t.denominationTarget),t?.bip39seed){if(t.bip39seed instanceof Uint8Array)return void(this._seed=t.bip39seed);throw new Error("bip39seed must be a valid UInt8Array")}t?.keepFactory&&(this._keepFactory=t.keepFactory)}get unit(){return this._unit}get keys(){return this._keys}get keysetId(){if(!this._keysetId)throw new Error("No keysetId set");return this._keysetId}set keysetId(e){this._keysetId=e}get keysets(){return this._keysets}get mintInfo(){if(!this._mintInfo)throw new Error("Mint info not loaded");return this._mintInfo}async getMintInfo(){const e=await this.mint.getInfo();return this._mintInfo=new ee(e),this._mintInfo}async loadMint(){await this.getMintInfo(),await this.getKeySets(),await this.getKeys()}getActiveKeyset(e){let t=e.filter((e=>e.active));t=t.filter((e=>e.id.startsWith("00")));const n=t.sort(((e,t)=>(e.input_fee_ppk??0)-(t.input_fee_ppk??0)))[0];if(!n)throw new Error("No active keyset found");return n}async getKeySets(){const e=(await this.mint.getKeySets()).keysets.filter((e=>e.unit===this._unit));return this._keysets=e,this._keysets}async getAllKeys(){const e=await this.mint.getKeys();return this._keys=new Map(e.keysets.map((e=>[e.id,e]))),this.keysetId=this.getActiveKeyset(this._keysets).id,e.keysets}async getKeys(e,t){if((!(this._keysets.length>0)||t)&&await this.getKeySets(),e||(e=this.getActiveKeyset(this._keysets).id),!this._keysets.find((t=>t.id===e))&&(await this.getKeySets(),!this._keysets.find((t=>t.id===e))))throw new Error(`could not initialize keys. No keyset with id '${e}' found`);if(!this._keys.get(e)){const t=await this.mint.getKeys(e);this._keys.set(e,t.keysets[0])}return this.keysetId=e,this._keys.get(e)}async receive(n,r){const{requireDleq:o,keysetId:i,outputAmounts:s,counter:a,pubkey:u,privkey:f,outputData:l,p2pk:h}=r||{};"string"==typeof n&&(n=C(n));const d=await this.getKeys(i);if(o&&n.proofs.some((n=>!function(n,r){if(null==n.dleq)return!1;const o={e:c(n.dleq.e),s:c(n.dleq.s),r:P(n.dleq.r??"00")};if(!U(n.amount,r.keys))throw new Error(`undefined key for amount ${n.amount}`);const i=r.keys[n.amount];return!!(0,e.verifyDLEQProof_reblind)((new TextEncoder).encode(n.secret),o,(0,t.pointFromHex)(n.C),(0,t.pointFromHex)(i))}(n,d))))throw new Error("Token contains proofs with invalid DLEQ");const p=F(n.proofs)-this.getFeesForProofs(n.proofs);let y;l?y={send:l}:this._keepFactory&&(y={send:this._keepFactory});const g=this.createSwapPayload(p,n.proofs,d,s,a,u,f,y,h),{signatures:m}=await this.mint.swap(g.payload),w=g.outputData.map(((e,t)=>e.toProof(m[t],d))),b=[];return g.sortedIndices.forEach(((e,t)=>{b[e]=w[t]})),b}async send(e,t,n){const{proofsWeHave:r,offline:o,includeFees:i,includeDleq:s,keysetId:a,outputAmounts:c,pubkey:u,privkey:f,outputData:l}=n||{};if(s&&(t=t.filter((e=>null!=e.dleq))),F(t)<e)throw new Error("Not enough funds available to send");const{keep:h,send:d}=this.selectProofsToSend(t,e,n?.includeFees),p=i?this.getFeesForProofs(d):0;if(!o&&(F(d)!=e+p||c||u||f||a||l)){const{keep:o,send:i}=this.selectProofsToSend(t,e,!0);r?.push(...o);const a=await this.swap(e,i,n);let{keep:c,send:u}=a;const f=a.serialized;return c=o.concat(c),s||(u=q(u)),{keep:c,send:u,serialized:f}}if(F(d)<e+p)throw new Error("Not enough funds available to send");return s?{keep:h,send:d}:{keep:h,send:q(d)}}selectProofsToSend(e,t,n){const r=e.sort(((e,t)=>e.amount-t.amount)),o=r.filter((e=>e.amount<=t)).sort(((e,t)=>t.amount-e.amount)),i=r.filter((e=>e.amount>t)).sort(((e,t)=>e.amount-t.amount))[0];if(!o.length&&i)return{keep:e.filter((e=>e.secret!==i.secret)),send:[i]};if(!o.length&&!i)return{keep:e,send:[]};let s=t,a=[o[0]];const c=[],u=n?this.getFeesForProofs(a):0;if(s-=a[0].amount-u/1e3,s>0){const{keep:e,send:t}=this.selectProofsToSend(o.slice(1),s,n);a.push(...t),c.push(...e)}const f=n?this.getFeesForProofs(a):0;return F(a)<t+f&&i&&(a=[i]),{keep:e.filter((e=>!a.includes(e))),send:a}}getFeesForProofs(e){if(!this._keysets.length)throw new Error("Could not calculate fees. No keysets found");return new Set(e.map((e=>e.id))).forEach((e=>{if(!this._keysets.find((t=>t.id===e)))throw new Error(`Could not calculate fees. No keyset found with id: ${e}`)})),Math.floor(Math.max((e.reduce(((e,t)=>e+(this._keysets.find((e=>e.id===t.id))?.input_fee_ppk||0)),0)+999)/1e3,0))}getFeesForKeyset(e,t){return Math.floor(Math.max((e*(this._keysets.find((e=>e.id===t))?.input_fee_ppk||0)+999)/1e3,0))}async swap(e,t,n){let{outputAmounts:r}=n||{};const{includeFees:o,keysetId:i,counter:s,pubkey:a,privkey:c,proofsWeHave:u,outputData:f,p2pk:l}=n||{},h=await this.getKeys(i),d=t;let p=e;const y=F(t);let g,m=y-p-this.getFeesForProofs(d),w=r?.sendAmounts||I(p,h.keys);if(o){let e=this.getFeesForKeyset(w.length,h.id),t=I(e,h.keys);for(;this.getFeesForKeyset(w.concat(t).length,h.id)>e;)e++,t=I(e,h.keys);w=w.concat(t),p+=e,m-=e}if(!r?.keepAmounts&&u)g=_(u,m,h.keys,this._denominationTarget);else if(r){if(r.keepAmounts?.reduce(((e,t)=>e+t),0)!=m)throw new Error("Keep amounts do not match amount to keep");g=r.keepAmounts}if(p+this.getFeesForProofs(d)>y)throw console.error(`Not enough funds available (${y}) for swap amountToSend: ${p} + fee: ${this.getFeesForProofs(d)} | length: ${d.length}`),new Error("Not enough funds available for swap");if(p+this.getFeesForProofs(d)+m!=y)throw new Error("Amounts do not match for swap");r={keepAmounts:g,sendAmounts:w};const b=f?.keep||this._keepFactory,v=f?.send,E=this.createSwapPayload(p,d,h,r,s,a,c,{keep:b,send:v},l),{signatures:B}=await this.mint.swap(E.payload),x=E.outputData.map(((e,t)=>e.toProof(B[t],h))),k=[],A=[],S=Array(E.keepVector.length),T=Array(x.length);return E.sortedIndices.forEach(((e,t)=>{S[e]=E.keepVector[t],T[e]=x[t]})),T.forEach(((e,t)=>{S[t]?k.push(e):A.push(e)})),{keep:k,send:A}}async restore(e,t,n){const{keysetId:r}=n||{},o=await this.getKeys(r);if(!this._seed)throw new Error("CashuWallet must be initialized with a seed to use restore");const i=Array(t).fill(0),s=re.createDeterministicData(i.length,this._seed,e,o,i),{outputs:a,promises:c}=await this.mint.restore({outputs:s.map((e=>e.blindedMessage))}),u=[];for(let e=0;e<a.length;e++){const t=s.find((t=>t.blindedMessage.B_===a[e].B_));t&&(u[e]={signature:c[e],data:t})}return u.forEach((e=>e.data.blindedMessage.amount=e.signature.amount)),{proofs:u.map((e=>e.data.toProof(e.signature,o)))}}async createMintQuote(e,t){const n={unit:this._unit,amount:e,description:t};return await this.mint.createMintQuote(n)}async checkMintQuote(e){return await this.mint.checkMintQuote(e)}async mintProofs(e,t,n){let{outputAmounts:r}=n||{};const{counter:o,pubkey:i,p2pk:s,keysetId:a,proofsWeHave:c,outputData:u}=n||{},f=await this.getKeys(a);!r&&c&&(r={keepAmounts:_(c,e,f.keys,this._denominationTarget),sendAmounts:[]});let l=[];if(u)if(ne(u)){const t=I(e,f.keys,r?.keepAmounts);for(let e=0;e<t.length;e++)l.push(u(t[e],f))}else l=u;else if(this._keepFactory){const t=I(e,f.keys,r?.keepAmounts);for(let e=0;e<t.length;e++)l.push(this._keepFactory(t[e],f))}else l=this.createOutputData(e,f,o,i,r?.keepAmounts,s);const h={outputs:l.map((e=>e.blindedMessage)),quote:t},{signatures:d}=await this.mint.mint(h);return l.map(((e,t)=>e.toProof(d[t],f)))}async createMeltQuote(e){const t={unit:this._unit,request:e};return await this.mint.createMeltQuote(t)}async checkMeltQuote(e){return await this.mint.checkMeltQuote(e)}async meltProofs(e,n,r){const{keysetId:o,counter:i,privkey:s}=r||{},a=await this.getKeys(o),c=this.createBlankOutputs(F(n)-e.amount,a,i,this._keepFactory);null!=s&&(n=(0,m.getSignedProofs)(n.map((e=>({amount:e.amount,C:(0,t.pointFromHex)(e.C),id:e.id,secret:(new TextEncoder).encode(e.secret)}))),s).map((e=>(0,g.serializeProof)(e)))),n=q(n);const u={quote:e.quote,inputs:n,outputs:c.map((e=>e.blindedMessage))},f=await this.mint.melt(u);return{quote:f,change:f.change?.map(((e,t)=>c[t].toProof(e,a)))??[]}}createSwapPayload(e,n,r,o,i,s,a,c,u){const f=n.reduce(((e,t)=>e+t.amount),0);o&&o.sendAmounts&&!o.keepAmounts&&(o.keepAmounts=I(f-e-this.getFeesForProofs(n),r.keys));const l=f-e-this.getFeesForProofs(n);let h=[],d=[];if(c?.keep)if(ne(c.keep)){const e=c.keep;I(l,r.keys).forEach((t=>{h.push(e(t,r))}))}else h=c.keep;else h=this.createOutputData(l,r,i,s,o?.keepAmounts,u,this._keepFactory);if(c?.send)if(ne(c.send)){const t=c.send;I(e,r.keys).forEach((e=>{d.push(t(e,r))}))}else d=c.send;else d=this.createOutputData(e,r,i?i+h.length:void 0,s,o?.sendAmounts,u);a&&(n=(0,m.getSignedProofs)(n.map((e=>({amount:e.amount,C:(0,t.pointFromHex)(e.C),id:e.id,secret:(new TextEncoder).encode(e.secret)}))),a).map((e=>(0,g.serializeProof)(e)))),n=q(n);const p=[...h,...d],y=p.map(((e,t)=>t)).sort(((e,t)=>p[e].blindedMessage.amount-p[t].blindedMessage.amount)),w=[...Array(h.length).fill(!0),...Array(d.length).fill(!1)],b=y.map((e=>p[e])),v=y.map((e=>w[e]));return{payload:{inputs:n,outputs:b.map((e=>e.blindedMessage))},outputData:b,keepVector:v,sortedIndices:y}}async checkProofsStates(e){const n=new TextEncoder,r=e.map((e=>(0,t.hashToCurve)(n.encode(e.secret)).toHex(!0))),o=[];for(let e=0;e<r.length;e+=100){const t=r.slice(e,e+100),{states:n}=await this.mint.check({Ys:t}),i={};n.forEach((e=>{i[e.Y]=e}));for(let e=0;e<t.length;e++){const n=i[t[e]];if(!n)throw new Error("Could not find state for proof with Y: "+t[e]);o.push(n)}}return o}async onMintQuoteUpdates(e,t,n){if(await this.mint.connectWebSocket(),!this.mint.webSocketConnection)throw new Error("failed to establish WebSocket connection.");const r=this.mint.webSocketConnection.createSubscription({kind:"bolt11_mint_quote",filters:e},t,n);return()=>{this.mint.webSocketConnection?.cancelSubscription(r,t)}}async onMeltQuotePaid(e,t,n){return this.onMeltQuoteUpdates([e],(e=>{e.state===V.PAID&&t(e)}),n)}async onMintQuotePaid(e,t,n){return this.onMintQuoteUpdates([e],(e=>{e.state===W.PAID&&t(e)}),n)}async onMeltQuoteUpdates(e,t,n){if(await this.mint.connectWebSocket(),!this.mint.webSocketConnection)throw new Error("failed to establish WebSocket connection.");const r=this.mint.webSocketConnection.createSubscription({kind:"bolt11_melt_quote",filters:e},t,n);return()=>{this.mint.webSocketConnection?.cancelSubscription(r,t)}}async onProofStateUpdates(e,n,r){if(await this.mint.connectWebSocket(),!this.mint.webSocketConnection)throw new Error("failed to establish WebSocket connection.");const o=new TextEncoder,i={};for(let n=0;n<e.length;n++){const r=(0,t.hashToCurve)(o.encode(e[n].secret)).toHex(!0);i[r]=e[n]}const s=Object.keys(i),a=this.mint.webSocketConnection.createSubscription({kind:"proof_state",filters:s},(e=>{n({...e,proof:i[e.Y]})}),r);return()=>{this.mint.webSocketConnection?.cancelSubscription(a,n)}}createOutputData(e,t,n,r,o,i,s){let a;if(r)a=re.createP2PKData({pubkey:r},e,t,o);else if(n||0===n){if(!this._seed)throw new Error("cannot create deterministic messages without seed");a=re.createDeterministicData(e,this._seed,n,t,o)}else a=i?re.createP2PKData(i,e,t,o):s?I(e,t.keys).map((e=>s(e,t))):re.createRandomData(e,t,o);return a}createBlankOutputs(e,t,n,r){let o=Math.ceil(Math.log2(e))||1;o<0&&(o=0);const i=o?Array(o).fill(1):[];return this.createOutputData(e,t,n,void 0,i,void 0,r)}}var ie=function(e,t,n,r){return new(n||(n=Promise))((function(o,i){function s(e){try{c(r.next(e))}catch(e){i(e)}}function a(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(s,a)}c((r=r.apply(e,t||[])).next())}))},se=function(e,t){var n,r,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},s=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return s.next=a(0),s.throw=a(1),s.return=a(2),"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s;function a(a){return function(c){return function(a){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,a[0]&&(i=0)),i;)try{if(n=1,r&&(o=2&a[0]?r.return:a[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,a[1])).done)return o;switch(r=0,o&&(a=[2&a[0],o.value]),a[0]){case 0:case 1:o=a;break;case 4:return i.label++,{value:a[1],done:!1};case 5:i.label++,r=a[1],a=[0];continue;case 7:a=i.ops.pop(),i.trys.pop();continue;default:if(!((o=(o=i.trys).length>0&&o[o.length-1])||6!==a[0]&&2!==a[0])){i=0;continue}if(3===a[0]&&(!o||a[1]>o[0]&&a[1]<o[3])){i.label=a[1];break}if(6===a[0]&&i.label<o[1]){i.label=o[1],o=a;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(a);break}o[2]&&i.ops.pop(),i.trys.pop();continue}a=t.call(e,i)}catch(e){a=[6,e],r=0}finally{n=o=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,c])}}},ae=function(e){return ie(void 0,void 0,void 0,(function(){var t,n;return se(this,(function(r){switch(r.label){case 0:return t=new X(e),[4,(n=new oe(t)).loadMint()];case 1:return r.sent(),[2,n]}}))}))},ce=function(e,t){return ie(void 0,void 0,void 0,(function(){return se(this,(function(n){switch(n.label){case 0:return[4,e.createMintQuote(t)];case 1:return[2,n.sent()]}}))}))},ue=function(e,t){return ie(void 0,void 0,void 0,(function(){var n;return se(this,(function(r){switch(r.label){case 0:return[4,new Promise((function(e){return setTimeout(e,5e3)}))];case 1:return r.sent(),[4,e.checkMintQuote(t)];case 2:n=r.sent(),console.log("Quote Status:",n.state),r.label=3;case 3:if("PAID"!==n.state)return[3,0];r.label=4;case 4:return[2,n.state]}}))}))},fe=function(e,t,n){return ie(void 0,void 0,void 0,(function(){return se(this,(function(r){switch(r.label){case 0:return[4,e.mintProofs(t,n)];case 1:return[2,r.sent()]}}))}))},le=function(e,t,n){return ie(void 0,void 0,void 0,(function(){return se(this,(function(r){switch(r.label){case 0:return[4,e.send(t,n)];case 1:return[2,r.sent()]}}))}))},he=function(e,t){return R({mint:e,proofs:t},{version:4})},de=function(e){return C(e)}})(),r})()));